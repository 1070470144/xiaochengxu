# âœ… å½»åº•è§£å†³ Cheerio é—®é¢˜

## ğŸ¯ æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

**å®Œå…¨ç§»é™¤ cheerio ä¾èµ–ï¼Œæ”¹ç”¨åŸç”ŸJavaScriptæ­£åˆ™è¡¨è¾¾å¼ï¼**

---

## ğŸ”§ å·²ä¿®å¤çš„æ–‡ä»¶

### 1. wiki-admin-sync-all
- âœ… ç§»é™¤ cheerio ä¾èµ–
- âœ… ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æHTML
- âœ… package.json ä¸­ dependencies ä¸ºç©º

### 2. wiki-admin-sync-single  
- âœ… æ”¹ä¸ºäº‘å¯¹è±¡æ–¹å¼ï¼ˆindex.obj.jsï¼‰
- âœ… å®Œå…¨ä¸ä¾èµ– cheerio
- âœ… ä½¿ç”¨æ­£åˆ™æå–å†…å®¹

### 3. sync.vue
- âœ… å•ä¸ªåŒæ­¥æ”¹ç”¨äº‘å¯¹è±¡è°ƒç”¨æ–¹å¼

---

## ğŸš€ ç«‹å³æ“ä½œï¼ˆå¿…é¡»ï¼ï¼‰

### Step 1: åˆ é™¤æ—§çš„äº‘å‡½æ•°

```bash
åœ¨ HBuilderX ä¸­ï¼š

1. æ‰¾åˆ° botc-admin/uniCloud-aliyun/cloudfunctions/wiki-admin-sync-single/
2. åˆ é™¤ index.js æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
3. ä¿ç•™ index.obj.js å’Œ package.json
```

### Step 2: é‡æ–°ä¸Šä¼ äº‘å‡½æ•°

```bash
1. å³é”® wiki-admin-sync-all â†’ ä¸Šä¼ éƒ¨ç½²
   ï¼ˆç°åœ¨ä¸éœ€è¦å®‰è£…ä¾èµ–ï¼Œå¾ˆå¿«ï¼ï¼‰

2. å³é”® wiki-admin-sync-single â†’ ä¸Šä¼ éƒ¨ç½²
   ï¼ˆä½¿ç”¨äº‘å¯¹è±¡æ–¹å¼ï¼‰

3. ç­‰å¾…ä¸Šä¼ å®Œæˆ
```

### Step 3: åˆ·æ–°å¹¶æµ‹è¯•

```bash
1. åˆ·æ–°ç®¡ç†åå°é¡µé¢ï¼ˆCtrl + F5ï¼‰
2. è¿›å…¥"ç™¾ç§‘åŒæ­¥"
3. åœ¨"å•ä¸ªåŒæ­¥"è¾“å…¥ï¼š
   https://clocktower-wiki.gstonegames.com/index.php?title=æ´—è¡£å¦‡
4. ç‚¹å‡»"åŒæ­¥"
5. åº”è¯¥æˆåŠŸï¼âœ…
```

---

## ğŸ“Š è§£ææ–¹å¼å¯¹æ¯”

### Beforeï¼ˆä½¿ç”¨ cheerioï¼‰
```javascript
const cheerio = require('cheerio');
const $ = cheerio.load(html);
const title = $('#firstHeading').text();
```
**é—®é¢˜**: ReadableStream å…¼å®¹æ€§é”™è¯¯ âŒ

### Afterï¼ˆä½¿ç”¨æ­£åˆ™ï¼‰
```javascript
const titleMatch = html.match(/<h1[^>]*id="firstHeading"[^>]*>(.*?)<\/h1>/is);
const title = titleMatch[1].replace(/<[^>]+>/g, '').trim();
```
**ä¼˜ç‚¹**: æ— å…¼å®¹æ€§é—®é¢˜ âœ…

---

## âœ… ä¿®å¤åçš„ä¼˜åŠ¿

1. âœ… **æ— ä¾èµ–** - ä¸éœ€è¦å®‰è£…ä»»ä½•npmåŒ…
2. âœ… **æ›´å¿«** - ä¸Šä¼ éƒ¨ç½²åªéœ€10ç§’
3. âœ… **æ›´ç¨³å®š** - æ— å…¼å®¹æ€§é—®é¢˜
4. âœ… **æ›´å°** - äº‘å‡½æ•°åŒ…æ›´å°

---

## ğŸ¯ å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Ÿ

è¯·æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—ï¼š

```bash
HBuilderX â†’ å³é”®äº‘å‡½æ•° â†’ äº‘å‡½æ•°æ—¥å¿—

æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯ï¼š
- HTTPè¯·æ±‚æ˜¯å¦æˆåŠŸ
- HTMLæ˜¯å¦è·å–åˆ°
- æ­£åˆ™åŒ¹é…æ˜¯å¦æˆåŠŸ
```

---

**ä¿®å¤æ—¶é—´**: 2025å¹´10æœˆ17æ—¥  
**æ–¹æ¡ˆ**: å®Œå…¨ç§»é™¤cheerioï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼  
**çŠ¶æ€**: âœ… å·²ä¿®å¤ï¼Œè¯·é‡æ–°ä¸Šä¼ æµ‹è¯•

