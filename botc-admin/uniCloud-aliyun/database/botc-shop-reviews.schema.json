{"bsonType":"object","description":"店铺评价表","required":["shop_id","user_id","rating","content"],"permission":{"read":true,"create":"auth.uid != null","update":"doc.user_id == auth.uid","delete":"doc.user_id == auth.uid"},"properties":{"_id":{"description":"评价ID"},"shop_id":{"bsonType":"string","description":"店铺ID","foreignKey":"botc-shops._id"},"user_id":{"bsonType":"string","description":"用户ID","foreignKey":"uni-id-users._id"},"rating":{"bsonType":"int","description":"评分：1-5星","minimum":1,"maximum":5,"errorMessage":{"minimum":"评分至少1星","maximum":"评分最多5星"}},"content":{"bsonType":"string","description":"评价内容","trim":"both","minLength":5,"maxLength":500,"errorMessage":{"minLength":"评价内容至少5个字","maxLength":"评价内容不能超过500字"}},"images":{"bsonType":"array","description":"评价图片","items":{"bsonType":"string"},"maxItems":9},"tags":{"bsonType":"array","description":"评价标签","items":{"bsonType":"string"}},"like_count":{"bsonType":"int","description":"点赞数","defaultValue":0},"reply":{"bsonType":"string","description":"店主回复","maxLength":500},"reply_time":{"bsonType":"timestamp","description":"回复时间"},"status":{"bsonType":"int","description":"状态：0-已删除 1-正常 2-已隐藏","enum":[0,1,2],"defaultValue":1},"created_at":{"bsonType":"timestamp","description":"评价时间","forceDefaultValue":{"$env":"now"}}}}