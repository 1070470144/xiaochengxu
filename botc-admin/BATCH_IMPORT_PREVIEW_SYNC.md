# âœ… æ‰¹é‡å¯¼å…¥é¢„è§ˆå›¾åŒæ­¥

## ğŸ”„ æ›´æ–°å†…å®¹

### å·²åŒæ­¥çš„ä¼˜åŒ–
æ‰¹é‡å¯¼å…¥åŠŸèƒ½çš„é¢„è§ˆç”Ÿæˆå™¨å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ŒåŒ…å«æ‰€æœ‰ä¼˜åŒ–ï¼š

#### 1. **å¸ƒå±€ä¼˜åŒ–**
- âœ… å·¦å³åˆ—é—´è·æ”¶ç¼©ï¼ˆ280pxä½ç½®ï¼‰
- âœ… è§’è‰²logoç¼©å°åˆ°22px
- âœ… è¡Œé«˜å¢åŠ åˆ°50px

#### 2. **æ–‡å­—æ˜¾ç¤ºä¼˜åŒ–**
- âœ… è§’è‰²åç§°å­—ä½“å¢å¤§ï¼ˆ11pxï¼‰
- âœ… æŠ€èƒ½æè¿°å­—ä½“å¢å¤§ï¼ˆ8pxï¼‰
- âœ… å·¦å³åˆ—å®½åº¦ç»Ÿä¸€ï¼ˆ135pxï¼Œ17å­—ç¬¦ï¼‰
- âœ… åˆ é™¤çœç•¥å·

#### 3. **å¤œæ™šè¡ŒåŠ¨é¡ºåº**
- âœ… å³ä¾§ä½ç½®å·¦ç§»ï¼ˆX=475ï¼‰
- âœ… Logoç¼©å°ï¼ˆ18pxï¼‰
- âœ… é—´è·è°ƒæ•´

---

## ğŸ“ æ›´æ–°çš„æ–‡ä»¶

### æ‰¹é‡å¯¼å…¥äº‘å‡½æ•°
```
botc-admin/uniCloud-aliyun/cloudfunctions/script-batch-import/
â”œâ”€â”€ index.js (æ— éœ€ä¿®æ”¹ï¼Œå·²æ­£ç¡®è°ƒç”¨)
â””â”€â”€ preview-generator.js âœ… å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
```

### å•ä¸ªæ·»åŠ äº‘å‡½æ•°
```
botc-admin/uniCloud-aliyun/cloudfunctions/script-generate-preview/
â”œâ”€â”€ index.js
â””â”€â”€ preview-generator.js âœ… æœ€æ–°ç‰ˆæœ¬
```

---

## ğŸ¯ åŠŸèƒ½ä¸€è‡´æ€§

### æ‰¹é‡å¯¼å…¥æµç¨‹
```javascript
// script-batch-import/index.js
for (const script of scripts) {
  // 1. è§£æJSONæ•°æ®
  let parsedJson = script.json_data
  
  // 2. ç”Ÿæˆé¢„è§ˆå›¾ï¼ˆä½¿ç”¨æœ€æ–°çš„preview-generatorï¼‰
  const svgContent = generateScriptPreviewSVG({
    title: script.title,
    author: script.author,
    json: parsedJson
  })
  
  // 3. è½¬æ¢ä¸ºbase64
  const svgBase64 = Buffer.from(svgContent, 'utf-8').toString('base64')
  script.preview_image = `data:image/svg+xml;base64,${svgBase64}`
  
  // 4. æ’å…¥æ•°æ®åº“
  await db.collection('botc-scripts').add(script)
}
```

### å•ä¸ªæ·»åŠ æµç¨‹
```javascript
// script-generate-preview/index.js
// ç”Ÿæˆé¢„è§ˆå›¾ï¼ˆä½¿ç”¨ç›¸åŒçš„preview-generatorï¼‰
const svgContent = generateScriptPreviewSVG({
  title: scriptData.title,
  author: scriptData.author,
  json: scriptData.json
})

// ä¸Šä¼ åˆ°äº‘å­˜å‚¨
const fileID = await uploadToCloudStorage(svgContent, filename)
```

---

## ğŸ“Š é¢„è§ˆå›¾å‚æ•°å¯¹ç…§

### ç»Ÿä¸€çš„å¸ƒå±€å‚æ•°
| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| SVGå®½åº¦ | 520px | å›ºå®šå®½åº¦ |
| æ ‡é¢˜å®½åº¦ | 360px | é˜Ÿä¼æ ‡é¢˜ |
| å·¦åˆ—ä½ç½® | X=90 | Logoä¸­å¿ƒ |
| å³åˆ—ä½ç½® | X=280 | Logoä¸­å¿ƒ |
| åˆ—é—´è· | 190px | 280-90 |
| è¡Œé«˜ | 50px | è§’è‰²è¡Œé—´è· |

### ç»Ÿä¸€çš„æ–‡å­—å‚æ•°
| å…ƒç´  | å­—ä½“ | å®½åº¦ | å­—ç¬¦æ•° |
|------|------|------|--------|
| è§’è‰²åç§° | 11pxç²—ä½“ | - | - |
| æŠ€èƒ½æè¿° | 8pxå¸¸è§„ | 135px | 17å­—ç¬¦ |
| æ˜¾ç¤ºè¡Œæ•° | - | - | 3è¡Œ |

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æ‰¹é‡å¯¼å…¥æµ‹è¯•
```bash
1. è¿›å…¥ç®¡ç†åå°
2. ç‚¹å‡»"æ‰¹é‡å¯¼å…¥"
3. ä¸Šä¼ åŒ…å«å¤šä¸ªå‰§æœ¬çš„JSONæ–‡ä»¶
4. ç­‰å¾…å¯¼å…¥å®Œæˆ
5. æŸ¥çœ‹ç”Ÿæˆçš„é¢„è§ˆå›¾
```

### éªŒè¯è¦ç‚¹
- âœ… å·¦å³åˆ—å®½åº¦ä¸€è‡´
- âœ… æ–‡å­—ä¸è¶…å‡ºæ ‡é¢˜
- âœ… è§’è‰²ä¸é‡å 
- âœ… å¤œæ™šè¡ŒåŠ¨åœ¨è¾¹æ¡†å†…
- âœ… æ— çœç•¥å·
- âœ… å¸ƒå±€ç¾è§‚

---

## ğŸ’¡ ä¼˜åŠ¿

### å®Œå…¨ä¸€è‡´çš„ä½“éªŒ
- âœ… **å•ä¸ªæ·»åŠ ** = **æ‰¹é‡å¯¼å…¥**ï¼šé¢„è§ˆå›¾å®Œå…¨ä¸€è‡´
- âœ… **ç»Ÿä¸€çš„ç¾è§‚åº¦**ï¼šæ‰€æœ‰å‰§æœ¬é¢„è§ˆå›¾é£æ ¼ç»Ÿä¸€
- âœ… **ç»´æŠ¤ç®€å•**ï¼šåªéœ€ç»´æŠ¤ä¸€ä¸ªpreview-generator.js
- âœ… **åŠŸèƒ½åŒæ­¥**ï¼šæœªæ¥ä¼˜åŒ–è‡ªåŠ¨åŒæ­¥

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### ä¸Šä¼ äº‘å‡½æ•°
```bash
æ‰¹é‡å¯¼å…¥åŠŸèƒ½éœ€è¦ä¸Šä¼ ä¸¤ä¸ªäº‘å‡½æ•°ï¼š
1. script-batch-importï¼ˆæ‰¹é‡å¯¼å…¥é€»è¾‘ï¼‰
2. script-generate-previewï¼ˆå•ä¸ªç”Ÿæˆé€»è¾‘ï¼‰

å³é”®äº‘å‡½æ•° â†’ ä¸Šä¼ éƒ¨ç½²
```

### ç‰ˆæœ¬åŒæ­¥
```bash
å¦‚æœä¿®æ”¹äº†preview-generator.jsï¼Œè®°å¾—åŒæ­¥åˆ°ä¸¤ä¸ªä½ç½®ï¼š
1. script-generate-preview/preview-generator.js
2. script-batch-import/preview-generator.js
```

---

**âœ… æ‰¹é‡å¯¼å…¥å·²åŒæ­¥æœ€æ–°ä¼˜åŒ–ï¼ç°åœ¨ä¸Šä¼ äº‘å‡½æ•°æµ‹è¯•ï¼** ğŸ‰
