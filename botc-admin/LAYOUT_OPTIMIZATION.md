# 📐 预览图布局优化

## 🔧 优化内容

解决右侧夜晚行动顺序与角色技能文字重叠的问题。

---

## 📊 布局调整

### 角色Logo尺寸
```javascript
// 之前
const logoSize = 28  // 太大，占用空间多

// 现在  
const logoSize = 22  // 适中，既清晰又不占用过多空间
```

### 夜晚行动顺序调整

#### 位置优化
```javascript
// 右侧X坐标
const rightNightX = 480  // 从465右移到480，远离角色文字

// 中心点
const centerX = rightNightX + 20  // 从25调整到20

// 垂直间距
const y = startY + index * 35  // 从30增加到35，避免重叠
```

#### Logo尺寸
```javascript
const logoSize = 18  // 夜晚行动logo更小，避免干扰
```

---

## 🎨 新的布局设计

### 预览图布局
```
┌─────────────────────────────────┐
│      【剧本标题】【作者】         │
├──┬──────────────────────────┬──┤
│🟠│  👥 镇民 (13个)           │🟣│
│🔴│  ⭕ 洗衣妇 - 能力描述...    │🟣│
│🟣│  ⭕ 图书管理员 - 能力...    │🟣│
│🟣│  ⭕ 调查员 - 能力描述...    │  │
│🟣│                           │🟣│
│🟣│  🏃 外来者 (4个)           │🟣│
│🟣│  ⭕ 管家 - 能力描述...      │  │
│  │                           │🟣│
│🟣│  🗡️ 爪牙 (4个)           │  │
│🟣│  ⭕ 投毒者 - 能力描述...    │🟣│
│  │                           │  │
│🟣│  😈 恶魔 (1个)            │  │
│  │  ⭕ 小恶魔 - 能力描述...    │  │
└──┴──────────────────────────┴──┘
```

### 尺寸对比
- **角色logo**：22px（适中）
- **夜晚行动logo**：18px（较小）
- **间距**：35px（增加）
- **右侧位置**：X=500（右移）

---

## ✅ 优化效果

### 1. 避免重叠
- ✅ 右侧夜晚行动顺序不再与角色文字重叠
- ✅ 增加垂直间距（35px）
- ✅ 右移位置（X=500）

### 2. 视觉平衡
- ✅ 角色logo适中（22px）
- ✅ 夜晚行动logo较小（18px）
- ✅ 层次分明，不抢夺注意力

### 3. 可读性提升
- ✅ 角色技能文字不被遮挡
- ✅ 夜晚行动顺序清晰可见
- ✅ 整体布局更协调

---

## 🧪 测试步骤

### 上传云函数
```bash
右键：script-generate-preview → 上传部署
```

### 重新生成预览图
```bash
在管理后台重新保存剧本
```

### 验证效果
```bash
查看预览图：
✅ 角色logo适中大小（22px）
✅ 右侧夜晚行动顺序不重叠
✅ 角色技能文字清晰可见
✅ 整体布局协调美观
```

---

## 📊 布局参数总结

| 元素 | 尺寸 | 位置 | 说明 |
|------|------|------|------|
| 角色logo | 22px | 左100，右320 | 主要内容 |
| 夜晚行动logo | 18px | 左35，右500 | 辅助信息 |
| 角色文字 | 9px | logo右侧30px | 不被遮挡 |
| 垂直间距 | 40px | 角色行间距 | 充足空间 |
| 夜晚间距 | 35px | 夜晚行动间距 | 避免重叠 |

---

**现在上传云函数测试！** 布局应该不再重叠了 📐✨
