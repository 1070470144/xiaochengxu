# ğŸ”§ ç¼–è¾‘å‰§æœ¬ä¿å­˜é”™è¯¯ä¿®å¤

## ğŸ› é—®é¢˜

ç¼–è¾‘å‰§æœ¬æ—¶ç‚¹å‡»ä¿å­˜æŠ¥é”™ï¼š
```
ä¿å­˜å¤±è´¥ï¼šä¸èƒ½æ›´æ–°_idçš„å€¼
```

---

## âœ… åŸå› 

åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œ`loadData()` æ–¹æ³•ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®åï¼š

```javascript
this.formData = {
  ...this.formData,
  ...res.result.data[0]  // åŒ…å«äº† _id å­—æ®µ
}
```

ç„¶åä¿å­˜æ—¶ï¼š
```javascript
const data = { ...this.formData }  // dataä¸­åŒ…å«_id
await db.collection('botc-scripts').doc(this.scriptId).update(data)
```

MongoDB **ä¸å…è®¸æ›´æ–° _id å­—æ®µ**ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

åœ¨æ›´æ–°æ•°æ®å‰ï¼Œåˆ é™¤ `_id` å­—æ®µï¼š

```javascript
if (this.isEdit) {
  // æ›´æ–°æ—¶éœ€è¦ç§»é™¤_idå­—æ®µï¼ˆä¸èƒ½æ›´æ–°_idï¼‰
  const updateData = { ...data }
  delete updateData._id
  
  await db.collection('botc-scripts')
    .doc(this.scriptId)
    .update(updateData)
}
```

---

## ğŸ¯ ä¿®å¤ä½ç½®

**æ–‡ä»¶**ï¼š`botc-admin/pages/botc/script/edit.vue`  
**ä½ç½®**ï¼šç¬¬608-615è¡Œ

---

## ğŸ§ª æµ‹è¯•

### ç¼–è¾‘å‰§æœ¬æµ‹è¯•ï¼š
```bash
1. è¿›å…¥å‰§æœ¬åˆ—è¡¨
2. ç‚¹å‡»ä»»æ„å‰§æœ¬çš„ã€Œç¼–è¾‘ã€æŒ‰é’®
3. ä¿®æ”¹ä»»æ„å­—æ®µï¼ˆå¦‚æ ‡é¢˜ï¼‰
4. ç‚¹å‡»ã€Œä¿å­˜ã€
5. âœ… åº”è¯¥ä¿å­˜æˆåŠŸï¼Œä¸å†æŠ¥é”™
```

---

## âœ… å®Œæˆ

- [x] é—®é¢˜è¯Šæ–­
- [x] ä»£ç ä¿®å¤
- [x] æ–‡æ¡£è¯´æ˜

---

**çŠ¶æ€**: âœ… å·²ä¿®å¤

