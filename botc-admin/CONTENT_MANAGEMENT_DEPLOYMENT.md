# ğŸš€ å†…å®¹ç®¡ç†ç³»ç»Ÿ - éƒ¨ç½²æ¸…å•

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

### æ•°æ®åº“Schemaï¼ˆ2ä¸ªï¼‰
- âœ… `botc-sensitive-words.schema.json` - æ•æ„Ÿè¯è¡¨
- âœ… `botc-reports.schema.json` - ä¸¾æŠ¥è¡¨

### äº‘å‡½æ•°ï¼ˆ2ä¸ªï¼‰
- âœ… `sensitive-words-admin/` - æ•æ„Ÿè¯ç®¡ç†
  - `index.js`
  - `package.json`
- âœ… `reports-admin/` - ä¸¾æŠ¥ç®¡ç†
  - `index.js`
  - `package.json`

### ç®¡ç†é¡µé¢ï¼ˆ2ä¸ªï¼‰
- âœ… `pages/botc/content/sensitive-words.vue` - æ•æ„Ÿè¯ç®¡ç†
- âœ… `pages/botc/content/reports.vue` - ä¸¾æŠ¥ç®¡ç†

### é…ç½®æ–‡ä»¶
- âœ… `pages.json` - å·²æ·»åŠ è·¯ç”±
- âœ… `opendb-admin-menus.init_data.json` - å·²æ·»åŠ èœå•

### æ–‡æ¡£
- âœ… `CONTENT_MANAGEMENT_GUIDE.md` - å®Œæ•´ä½¿ç”¨æ–‡æ¡£

---

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰

### æ­¥éª¤1ï¼šä¸Šä¼ æ•°æ®åº“Schema

```bash
åœ¨HBuilderXä¸­ï¼š

1. å³é”®ï¼šbotc-admin/uniCloud-aliyun/database/botc-sensitive-words.schema.json
   â†’ ä¸Šä¼ DB Schema
   â†’ ç­‰å¾…"ä¸Šä¼ æˆåŠŸ"

2. å³é”®ï¼šbotc-admin/uniCloud-aliyun/database/botc-reports.schema.json
   â†’ ä¸Šä¼ DB Schema
   â†’ ç­‰å¾…"ä¸Šä¼ æˆåŠŸ"
```

### æ­¥éª¤2ï¼šä¸Šä¼ äº‘å‡½æ•°

```bash
åœ¨HBuilderXä¸­ï¼š

1. å³é”®ï¼šbotc-admin/uniCloud-aliyun/cloudfunctions/sensitive-words-admin
   â†’ ä¸Šä¼ éƒ¨ç½²
   â†’ ç­‰å¾…"ä¸Šä¼ æˆåŠŸ"

2. å³é”®ï¼šbotc-admin/uniCloud-aliyun/cloudfunctions/reports-admin
   â†’ ä¸Šä¼ éƒ¨ç½²
   â†’ ç­‰å¾…"ä¸Šä¼ æˆåŠŸ"
```

### æ­¥éª¤3ï¼šæ·»åŠ èœå•

#### æ–¹æ³•1ï¼šé€šè¿‡"èœå•ç®¡ç†"ç•Œé¢æ·»åŠ ï¼ˆæ¨èï¼‰

```bash
1. ç™»å½•ç®¡ç†åå°
2. è¿›å…¥ï¼šç³»ç»Ÿç®¡ç† â†’ èœå•ç®¡ç†
3. ç‚¹å‡»"æ–°å¢èœå•"
```

**æ•æ„Ÿè¯ç®¡ç†èœå•ï¼š**
```
èœå•IDï¼šbotc-sensitive-words
èœå•åç§°ï¼šæ•æ„Ÿè¯ç®¡ç†
çˆ¶çº§èœå•ï¼šè¡€æŸ“é’Ÿæ¥¼ç®¡ç†
èœå•å›¾æ ‡ï¼šadmin-icons-safety
èœå•è·¯å¾„ï¼š/pages/botc/content/sensitive-words
æ’åºï¼š106
å¯ç”¨çŠ¶æ€ï¼šâœ… å‹¾é€‰
```

**ä¸¾æŠ¥ç®¡ç†èœå•ï¼š**
```
èœå•IDï¼šbotc-reports
èœå•åç§°ï¼šä¸¾æŠ¥ç®¡ç†
çˆ¶çº§èœå•ï¼šè¡€æŸ“é’Ÿæ¥¼ç®¡ç†
èœå•å›¾æ ‡ï¼šadmin-icons-read
èœå•è·¯å¾„ï¼š/pages/botc/content/reports
æ’åºï¼š107
å¯ç”¨çŠ¶æ€ï¼šâœ… å‹¾é€‰
```

#### æ–¹æ³•2ï¼šä¿®æ”¹æ•°æ®åº“ï¼ˆå¦‚æœèœå•ç®¡ç†ä¸å¯ç”¨ï¼‰

```bash
1. æ‰“å¼€uniCloud webæ§åˆ¶å°
2. è¿›å…¥ï¼šäº‘æ•°æ®åº“ â†’ opendb-admin-menus
3. æ·»åŠ ä¸¤æ¡è®°å½•ï¼ˆè§ä¸‹æ–‡JSONï¼‰
```

**æ•æ„Ÿè¯ç®¡ç†èœå•JSONï¼š**
```json
{
  "menu_id": "botc-sensitive-words",
  "name": "æ•æ„Ÿè¯ç®¡ç†",
  "icon": "admin-icons-safety",
  "url": "/pages/botc/content/sensitive-words",
  "sort": 106,
  "parent_id": "botc-manage",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

**ä¸¾æŠ¥ç®¡ç†èœå•JSONï¼š**
```json
{
  "menu_id": "botc-reports",
  "name": "ä¸¾æŠ¥ç®¡ç†",
  "icon": "admin-icons-read",
  "url": "/pages/botc/content/reports",
  "sort": 107,
  "parent_id": "botc-manage",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

### æ­¥éª¤4ï¼šéªŒè¯éƒ¨ç½²

```bash
1. åˆ·æ–°ç®¡ç†åå°ï¼ˆCtrl + F5ï¼‰
2. æŸ¥çœ‹å·¦ä¾§èœå•æ˜¯å¦æ˜¾ç¤º
3. ç‚¹å‡»èœå•æµ‹è¯•è·³è½¬
4. æµ‹è¯•åŸºæœ¬åŠŸèƒ½
```

---

## ğŸ” éªŒè¯æ¸…å•

### æ•°æ®åº“éªŒè¯
- [ ] æ‰“å¼€uniCloud webæ§åˆ¶å°
- [ ] æŸ¥çœ‹"äº‘æ•°æ®åº“"
- [ ] ç¡®è®¤å­˜åœ¨ `botc-sensitive-words` è¡¨
- [ ] ç¡®è®¤å­˜åœ¨ `botc-reports` è¡¨

### äº‘å‡½æ•°éªŒè¯
- [ ] æ‰“å¼€uniCloud webæ§åˆ¶å°
- [ ] æŸ¥çœ‹"äº‘å‡½æ•°"
- [ ] ç¡®è®¤å­˜åœ¨ `sensitive-words-admin` å‡½æ•°
- [ ] ç¡®è®¤å­˜åœ¨ `reports-admin` å‡½æ•°

### èœå•éªŒè¯
```
ğŸ“± è¡€æŸ“é’Ÿæ¥¼ç®¡ç†
  â”œâ”€ åº—é“ºè®¤è¯å®¡æ ¸
  â”œâ”€ æ‹¼è½¦ç®¡ç†
  â”œâ”€ å¸–å­å®¡æ ¸
  â”œâ”€ å‰§æœ¬ç®¡ç†
  â”œâ”€ è¯´ä¹¦äººè®¤è¯å®¡æ ¸
  â”œâ”€ æ•æ„Ÿè¯ç®¡ç†  âœ… æ–°å¢
  â””â”€ ä¸¾æŠ¥ç®¡ç†  âœ… æ–°å¢
```

### é¡µé¢éªŒè¯
- [ ] ç‚¹å‡»"æ•æ„Ÿè¯ç®¡ç†"èƒ½æ­£å¸¸è·³è½¬
- [ ] é¡µé¢æ­£å¸¸åŠ è½½ï¼ˆæ˜¾ç¤º"æš‚æ— æ•°æ®"ï¼‰
- [ ] ç‚¹å‡»"ä¸¾æŠ¥ç®¡ç†"èƒ½æ­£å¸¸è·³è½¬
- [ ] é¡µé¢æ­£å¸¸åŠ è½½ï¼ˆæ˜¾ç¤ºç»Ÿè®¡æ•°æ®ï¼‰

---

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### æ•æ„Ÿè¯ç®¡ç†æµ‹è¯•

#### 1. æ·»åŠ æ•æ„Ÿè¯
```bash
1. ç‚¹å‡»"æ·»åŠ æ•æ„Ÿè¯"
2. å¡«å†™ä¿¡æ¯ï¼š
   - æ•æ„Ÿè¯ï¼šæµ‹è¯•è¯
   - ç±»å‹ï¼šå…¶ä»–
   - çº§åˆ«ï¼š2
   - çŠ¶æ€ï¼šå¯ç”¨
3. ç‚¹å‡»"ç¡®å®š"
4. éªŒè¯åˆ—è¡¨ä¸­å‡ºç°è¯¥æ•æ„Ÿè¯
```

#### 2. ç¼–è¾‘æ•æ„Ÿè¯
```bash
1. ç‚¹å‡»æŸä¸ªæ•æ„Ÿè¯çš„"ç¼–è¾‘"
2. ä¿®æ”¹ä¿¡æ¯
3. ç‚¹å‡»"ç¡®å®š"
4. éªŒè¯ä¿®æ”¹æˆåŠŸ
```

#### 3. åˆ é™¤æ•æ„Ÿè¯
```bash
1. ç‚¹å‡»æŸä¸ªæ•æ„Ÿè¯çš„"åˆ é™¤"
2. ç¡®è®¤åˆ é™¤
3. éªŒè¯è¯¥æ•æ„Ÿè¯å·²æ¶ˆå¤±
```

#### 4. æ‰¹é‡å¯¼å…¥
```bash
1. ç‚¹å‡»"æ‰¹é‡å¯¼å…¥"
2. è¾“å…¥ï¼š
   æµ‹è¯•è¯1
   æµ‹è¯•è¯2
   æµ‹è¯•è¯3
3. ç‚¹å‡»"å¯¼å…¥"
4. éªŒè¯å¯¼å…¥ç»“æœ
```

### ä¸¾æŠ¥ç®¡ç†æµ‹è¯•

#### 1. æŸ¥çœ‹ç»Ÿè®¡
```bash
éªŒè¯ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºï¼š
- å¾…å¤„ç†ï¼š0
- å¤„ç†ä¸­ï¼š0
- å·²å¤„ç†ï¼š0
- å·²é©³å›ï¼š0
```

#### 2. ç­›é€‰åŠŸèƒ½
```bash
1. åˆ‡æ¢çŠ¶æ€ç­›é€‰
2. åˆ‡æ¢å†…å®¹ç±»å‹ç­›é€‰
3. åˆ‡æ¢ä¸¾æŠ¥åŸå› ç­›é€‰
4. éªŒè¯åˆ—è¡¨æ­£ç¡®è¿‡æ»¤
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šèœå•ä¸æ˜¾ç¤º
**è§£å†³**ï¼š
1. æ£€æŸ¥ `parent_id` æ˜¯å¦ä¸º `botc-manage`
2. æ£€æŸ¥ `enable` æ˜¯å¦ä¸º `true`
3. åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl + F5ï¼‰
4. é‡æ–°ç™»å½•ç®¡ç†åå°

### é—®é¢˜2ï¼šäº‘å‡½æ•°è°ƒç”¨å¤±è´¥
**è§£å†³**ï¼š
1. ç¡®è®¤äº‘å‡½æ•°å·²ä¸Šä¼ 
2. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—
3. æ£€æŸ¥å‚æ•°æ˜¯å¦æ­£ç¡®
4. é‡æ–°ä¸Šä¼ äº‘å‡½æ•°

### é—®é¢˜3ï¼šé¡µé¢ç©ºç™½æˆ–404
**è§£å†³**ï¼š
1. æ£€æŸ¥ `pages.json` æ˜¯å¦é…ç½®è·¯ç”±
2. æ£€æŸ¥é¡µé¢æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. é‡å¯å¼€å‘æœåŠ¡å™¨

### é—®é¢˜4ï¼šæ•°æ®åº“æ“ä½œå¤±è´¥
**è§£å†³**ï¼š
1. ç¡®è®¤Schemaå·²ä¸Šä¼ 
2. æ£€æŸ¥æ•°æ®è¡¨æ˜¯å¦åˆ›å»º
3. æŸ¥çœ‹æ•°æ®åº“æƒé™é…ç½®

---

## ğŸ“ åç»­é›†æˆ

### ä¸å®¢æˆ·ç«¯é›†æˆ

#### æ•æ„Ÿè¯è¿‡æ»¤ï¼ˆå®¢æˆ·ç«¯å®ç°ï¼‰
```javascript
// åœ¨ç”¨æˆ·å‘å¸ƒå†…å®¹å‰è°ƒç”¨
const content = 'ç”¨æˆ·è¾“å…¥çš„å†…å®¹'

// è°ƒç”¨æ•æ„Ÿè¯æ£€æµ‹äº‘å‡½æ•°ï¼ˆéœ€è¦åˆ›å»ºï¼‰
const res = await uniCloud.callFunction({
  name: 'sensitive-words-check',
  data: { content }
})

if (res.result.hasSensitive) {
  // æ ¹æ®çº§åˆ«å¤„ç†
  if (res.result.level === 3) {
    // é‡åº¦ï¼šç¦æ­¢å‘å¸ƒ
    uni.showToast({ title: 'å†…å®¹åŒ…å«è¿è§„ä¿¡æ¯', icon: 'none' })
  } else if (res.result.level === 2) {
    // ä¸­åº¦ï¼šè¿›å…¥å®¡æ ¸
    uni.showToast({ title: 'å†…å®¹å°†è¿›å…¥å®¡æ ¸', icon: 'none' })
  } else {
    // è½»åº¦ï¼šæç¤º
    uni.showToast({ title: 'è¯·æ³¨æ„æ–‡æ˜ç”¨è¯­', icon: 'none' })
  }
}
```

#### ä¸¾æŠ¥åŠŸèƒ½ï¼ˆå®¢æˆ·ç«¯å®ç°ï¼‰
```javascript
// ç”¨æˆ·ä¸¾æŠ¥æŸä¸ªå†…å®¹
const reportData = {
  content_type: 'post', // å¸–å­
  content_id: 'xxx',
  reason: 'spam',
  description: 'è¯¦ç»†æè¿°',
  images: [] // æˆªå›¾
}

const res = await uniCloud.callFunction({
  name: 'content-report', // éœ€è¦åˆ›å»ºå®¢æˆ·ç«¯äº‘å‡½æ•°
  data: reportData
})

if (res.result.code === 0) {
  uni.showToast({ title: 'ä¸¾æŠ¥æˆåŠŸï¼Œæˆ‘ä»¬å°†å°½å¿«å¤„ç†', icon: 'success' })
}
```

---

**âœ… éƒ¨ç½²å®Œæˆåï¼Œä¸¤ä¸ªå†…å®¹ç®¡ç†åŠŸèƒ½å³å¯ä½¿ç”¨ï¼** ğŸ‰

**æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æ•°æ®åº“Schemaå·²ä¸Šä¼ 
- [ ] äº‘å‡½æ•°å·²ä¸Šä¼ 
- [ ] èœå•å·²æ·»åŠ 
- [ ] é¡µé¢å¯æ­£å¸¸è®¿é—®
- [ ] åŸºæœ¬åŠŸèƒ½æµ‹è¯•é€šè¿‡

**å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒä¸Šé¢çš„"å¸¸è§é—®é¢˜"ç« èŠ‚ï¼** ğŸ”§

