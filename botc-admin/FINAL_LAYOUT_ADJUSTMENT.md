# 📐 最终布局调整

## 🔧 调整内容

### 1. **角色技能宽度进一步缩短**
```javascript
// 第278行
const maxLineWidth = isLeftColumn ? 130 : 100  // 左列130px，右列100px

// 第279行  
const abilityLines = splitTextToLines(ability, isLeftColumn ? 16 : 12)  // 左列16字符，右列12字符
```

### 2. **右侧夜晚行动顺序左移**
```javascript
// 第106行
const rightNightX = 460  // 从480左移到460

// 第145行
const centerX = rightNightX + 15  // 从20改为15，进一步左移
```

---

## 📊 新的布局参数

### 宽度分配（总宽度520px）
```
边框：10px
左侧夜晚行动：35px
左列内容：130px（logo30px + 文字100px）
中间间距：20px
右列内容：100px（logo30px + 文字70px）
右侧夜晚行动：35px（X=475，在边框内）
边框：10px
```

### 文字限制
- **左列**：16字符/行，最多3行
- **右列**：12字符/行，最多3行
- **智能断句**：在标点符号处断开

---

## 🎨 预期效果

### 角色技能显示
```
👥 镇民 (13个)
⭕ 洗衣妇 - 在你的首个夜晚，你会得知    ⭕ 图书管理员 - 在你的首个
           两名玩家，其中一人是特定的            夜晚，你会得知一个
           镇民角色。                          不在场的角色。
```

### 右侧夜晚行动
```
                                        🟣 (在黄色边框内)
                                        🟣
                                        🟣
```

---

## 📏 布局验证

### 宽度检查
- **标题宽度**：360px
- **左列文字**：最大130px ✅ 在范围内
- **右列文字**：最大100px ✅ 在范围内
- **右侧夜晚行动**：X=475 ✅ 在边框内（520-10=510）

### 视觉效果
- ✅ 所有文字都在标题宽度内
- ✅ 右侧夜晚行动在边框内
- ✅ 布局紧凑但不拥挤
- ✅ 信息完整但不冗余

---

## 🧪 测试验证

### 上传云函数
```bash
右键：script-generate-preview → 上传部署
```

### 重新生成预览图
```bash
在管理后台重新保存剧本
```

### 检查效果
- ✅ 左右两列文字都不超出标题宽度
- ✅ 右侧夜晚行动顺序在黄色边框内
- ✅ 文字换行更合理
- ✅ 整体布局协调

---

**现在上传云函数测试！** 布局应该完全在边界内了 📐✨
