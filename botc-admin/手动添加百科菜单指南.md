# 📋 手动添加百科菜单详细指南

## 🎯 目标

在管理后台的"血染钟楼管理"菜单下添加两个子菜单：
- 📚 百科同步
- 📋 百科管理

---

## 📝 操作步骤（图文详解）

### 第一步：登录管理后台

```bash
1. 打开浏览器
2. 访问管理后台地址（通常是 http://localhost:8080）
3. 输入管理员账号密码
4. 登录成功
```

---

### 第二步：进入菜单管理

```bash
1. 在左侧菜单栏找到"系统管理"
2. 点击展开
3. 找到"菜单管理"
4. 点击进入菜单管理页面
```

**菜单路径**：`系统管理 → 菜单管理`

---

### 第三步：添加"百科同步"菜单

#### 3.1 点击"添加"按钮
```bash
在菜单管理页面的右上角或列表上方
找到"添加"、"新增"或"+"按钮
点击打开添加菜单表单
```

#### 3.2 填写表单（第一个菜单：百科同步）

**表单字段填写**：

| 字段名 | 填写内容 | 说明 |
|--------|---------|------|
| **菜单ID** | `botc_wiki_sync` | 唯一标识，不要重复 |
| **菜单名称** | `百科同步` | 显示在菜单上的名字 |
| **图标** | `uni-icons-loop` | 循环图标 |
| **页面地址/URL** | `/pages/botc/wiki/sync` | 页面路径 |
| **排序** | `3010` | 数字越小越靠前 |
| **父级菜单** | `血染钟楼管理` | 从下拉列表选择 |
| **是否启用** | `是` 或 勾选 | 启用此菜单 |

**详细说明**：

```
┌─────────────────────────────────────────┐
│  添加菜单                                │
├─────────────────────────────────────────┤
│                                          │
│  菜单ID:        [botc_wiki_sync      ]  │
│                                          │
│  菜单名称:      [百科同步             ]  │
│                                          │
│  图标:          [uni-icons-loop       ]  │
│                                          │
│  页面地址:      [/pages/botc/wiki/sync]  │
│                                          │
│  排序:          [3010                 ]  │
│                                          │
│  父级菜单:      [▼ 血染钟楼管理       ]  │
│                                          │
│  是否启用:      [✓] 启用               │
│                                          │
│         [ 取消 ]        [ 确定 ]        │
└─────────────────────────────────────────┘
```

#### 3.3 点击"保存"或"确定"
```bash
检查所有字段填写正确
点击"保存"或"确定"按钮
等待保存成功提示
```

---

### 第四步：添加"百科管理"菜单

#### 4.1 再次点击"添加"按钮

#### 4.2 填写表单（第二个菜单：百科管理）

**表单字段填写**：

| 字段名 | 填写内容 | 说明 |
|--------|---------|------|
| **菜单ID** | `botc_wiki_list` | 唯一标识 |
| **菜单名称** | `百科管理` | 显示名称 |
| **图标** | `uni-icons-list` | 列表图标 |
| **页面地址/URL** | `/pages/botc/wiki/list` | 页面路径 |
| **排序** | `3020` | 在"百科同步"之后 |
| **父级菜单** | `血染钟楼管理` | 从下拉列表选择 |
| **是否启用** | `是` 或 勾选 | 启用此菜单 |

**详细说明**：

```
┌─────────────────────────────────────────┐
│  添加菜单                                │
├─────────────────────────────────────────┤
│                                          │
│  菜单ID:        [botc_wiki_list      ]  │
│                                          │
│  菜单名称:      [百科管理             ]  │
│                                          │
│  图标:          [uni-icons-list       ]  │
│                                          │
│  页面地址:      [/pages/botc/wiki/list]  │
│                                          │
│  排序:          [3020                 ]  │
│                                          │
│  父级菜单:      [▼ 血染钟楼管理       ]  │
│                                          │
│  是否启用:      [✓] 启用               │
│                                          │
│         [ 取消 ]        [ 确定 ]        │
└─────────────────────────────────────────┘
```

#### 4.3 点击"保存"或"确定"

---

### 第五步：刷新页面查看

```bash
1. 添加完两个菜单后
2. 按 F5 刷新浏览器
3. 或者按 Ctrl + F5 强制刷新
4. 查看左侧菜单栏
```

---

## ✅ 验证菜单添加成功

### 成功标志

在左侧菜单栏应该看到：

```
📊 首页
🔧 系统管理
   ├─ 用户管理
   ├─ 角色管理
   ├─ 权限管理
   └─ ...

🎯 血染钟楼管理        ← 已存在
   ├─ 📚 百科同步      ← 新添加 ✅
   ├─ 📋 百科管理      ← 新添加 ✅
   ├─ 📄 剧本管理      ← 已存在
   ├─ 🚗 拼车管理      ← 已存在
   └─ 🏪 店铺认证      ← 已存在
```

### 测试菜单

```bash
1. 点击"百科同步"
   → 应该跳转到同步管理页面
   → 页面显示统计数据和同步按钮

2. 点击"百科管理"
   → 应该跳转到词条列表页面
   → 页面显示词条列表（可能为空）
```

---

## 📋 完整的菜单配置参考

### 百科同步菜单配置

```json
{
  "menu_id": "botc_wiki_sync",
  "name": "百科同步",
  "icon": "uni-icons-loop",
  "url": "/pages/botc/wiki/sync",
  "sort": 3010,
  "parent_id": "botc_management",
  "permission": [],
  "enable": true
}
```

**字段说明**：
- `menu_id`: 菜单唯一标识符，必须唯一
- `name`: 菜单显示名称
- `icon`: 图标类名（uni-icons系列）
- `url`: 页面路径，必须在pages.json中已配置
- `sort`: 排序数字，越小越靠前
- `parent_id`: 父菜单的menu_id，如果是"血染钟楼管理"就填`botc_management`
- `permission`: 权限控制，留空表示所有管理员可见
- `enable`: true表示启用

---

### 百科管理菜单配置

```json
{
  "menu_id": "botc_wiki_list",
  "name": "百科管理",
  "icon": "uni-icons-list",
  "url": "/pages/botc/wiki/list",
  "sort": 3020,
  "parent_id": "botc_management",
  "permission": [],
  "enable": true
}
```

---

## 🔍 常见问题

### Q1: 找不到"添加"按钮？
**A**: 
- 检查是否有权限（需要超级管理员权限）
- 按钮可能叫"新增"、"创建"或"+"号图标
- 通常在页面右上角或表格上方

---

### Q2: 没有"父级菜单"下拉选项？
**A**: 
- 有些后台可能叫"上级菜单"或"父菜单"
- 如果是输入框，直接输入：`botc_management`
- 如果找不到"血染钟楼管理"，说明这个一级菜单可能不存在

---

### Q3: "血染钟楼管理"菜单不存在怎么办？
**A**: 需要先创建一级菜单：

```
菜单ID：       botc_management
菜单名称：     血染钟楼管理
图标：         uni-icons-gear
页面地址：     （留空）
排序：         3000
父级菜单：     （留空，表示一级菜单）
是否启用：     是
```

先保存一级菜单，再添加子菜单。

---

### Q4: 添加后菜单不显示？
**A**: 
1. 刷新页面（Ctrl + F5）
2. 重新登录
3. 检查"是否启用"是否勾选
4. 检查parent_id是否正确

---

### Q5: 点击菜单显示404？
**A**: 
1. 检查pages.json是否已添加路由
2. 检查页面文件是否存在
3. 检查URL路径是否正确（区分大小写）

---

## 💡 图标选项参考

### 可用的图标类名

```
uni-icons-loop        # 循环/刷新图标（推荐用于"百科同步"）
uni-icons-list        # 列表图标（推荐用于"百科管理"）
uni-icons-gear        # 齿轮/设置图标
uni-icons-book        # 书籍图标
uni-icons-cloud-upload # 上传图标
uni-icons-database    # 数据库图标
```

**提示**：如果不确定图标名称，可以留空或使用 `uni-icons-list`

---

## 🎯 完整操作清单

### 添加"百科同步"菜单 ✅

- [ ] 登录管理后台
- [ ] 进入：系统管理 → 菜单管理
- [ ] 点击"添加"按钮
- [ ] 菜单ID输入：`botc_wiki_sync`
- [ ] 菜单名称输入：`百科同步`
- [ ] 图标输入：`uni-icons-loop`
- [ ] 页面地址输入：`/pages/botc/wiki/sync`
- [ ] 排序输入：`3010`
- [ ] 父级菜单选择：`血染钟楼管理`
- [ ] 是否启用：勾选或选"是"
- [ ] 点击保存

### 添加"百科管理"菜单 ✅

- [ ] 再次点击"添加"按钮
- [ ] 菜单ID输入：`botc_wiki_list`
- [ ] 菜单名称输入：`百科管理`
- [ ] 图标输入：`uni-icons-list`
- [ ] 页面地址输入：`/pages/botc/wiki/list`
- [ ] 排序输入：`3020`
- [ ] 父级菜单选择：`血染钟楼管理`
- [ ] 是否启用：勾选或选"是"
- [ ] 点击保存

### 验证菜单 ✅

- [ ] 刷新页面（F5）
- [ ] 查看左侧菜单
- [ ] 展开"血染钟楼管理"
- [ ] 看到"百科同步"和"百科管理"
- [ ] 点击测试能否打开页面

---

## 🖼️ 表单填写示例

### 示例1：添加"百科同步"

```
╔═══════════════════════════════════════════╗
║           添加菜单                         ║
╠═══════════════════════════════════════════╣
║                                            ║
║  菜单ID *                                  ║
║  ┌──────────────────────────────────────┐ ║
║  │ botc_wiki_sync                       │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  菜单名称 *                                ║
║  ┌──────────────────────────────────────┐ ║
║  │ 百科同步                              │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  图标                                      ║
║  ┌──────────────────────────────────────┐ ║
║  │ uni-icons-loop                       │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  页面地址                                  ║
║  ┌──────────────────────────────────────┐ ║
║  │ /pages/botc/wiki/sync                │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  排序                                      ║
║  ┌──────────────────────────────────────┐ ║
║  │ 3010                                 │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  父级菜单                                  ║
║  ┌──────────────────────────────────────┐ ║
║  │ ▼ 血染钟楼管理                        │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  是否启用                                  ║
║  ☑ 启用                                   ║
║                                            ║
║         [ 取消 ]        [ 保存 ]          ║
╚═══════════════════════════════════════════╝
```

---

### 示例2：添加"百科管理"

```
╔═══════════════════════════════════════════╗
║           添加菜单                         ║
╠═══════════════════════════════════════════╣
║                                            ║
║  菜单ID *                                  ║
║  ┌──────────────────────────────────────┐ ║
║  │ botc_wiki_list                       │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  菜单名称 *                                ║
║  ┌──────────────────────────────────────┐ ║
║  │ 百科管理                              │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  图标                                      ║
║  ┌──────────────────────────────────────┐ ║
║  │ uni-icons-list                       │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  页面地址                                  ║
║  ┌──────────────────────────────────────┐ ║
║  │ /pages/botc/wiki/list                │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  排序                                      ║
║  ┌──────────────────────────────────────┐ ║
║  │ 3020                                 │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  父级菜单                                  ║
║  ┌──────────────────────────────────────┐ ║
║  │ ▼ 血染钟楼管理                        │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  是否启用                                  ║
║  ☑ 启用                                   ║
║                                            ║
║         [ 取消 ]        [ 保存 ]          ║
╚═══════════════════════════════════════════╝
```

---

## 📊 字段填写对照表

### 百科同步菜单

| 字段 | 值 | 备注 |
|------|---|------|
| 菜单ID | `botc_wiki_sync` | 复制这个，原样粘贴 |
| 菜单名称 | `百科同步` | 可以自定义 |
| 图标 | `uni-icons-loop` | 复制粘贴 |
| 页面地址 | `/pages/botc/wiki/sync` | 必须准确 |
| 排序 | `3010` | 数字 |
| 父级菜单 | `血染钟楼管理` | 从下拉选择 |
| 启用 | `是` | 勾选 |

### 百科管理菜单

| 字段 | 值 | 备注 |
|------|---|------|
| 菜单ID | `botc_wiki_list` | 复制这个，原样粘贴 |
| 菜单名称 | `百科管理` | 可以自定义 |
| 图标 | `uni-icons-list` | 复制粘贴 |
| 页面地址 | `/pages/botc/wiki/list` | 必须准确 |
| 排序 | `3020` | 数字 |
| 父级菜单 | `血染钟楼管理` | 从下拉选择 |
| 启用 | `是` | 勾选 |

---

## 🎯 添加成功后的效果

### 菜单结构

```
血染钟楼管理
  ├─ 百科同步      ← 点击进入同步管理页面
  ├─ 百科管理      ← 点击进入词条列表页面
  ├─ 剧本管理
  ├─ 拼车管理
  └─ 店铺认证
```

### 功能说明

**百科同步页面**：
- 显示统计数据（总词条、角色数、规则数）
- 批量同步按钮（全部/角色/剧本/规则）
- 单个URL同步输入框
- 同步日志列表

**百科管理页面**：
- 显示所有词条列表
- 类型筛选（角色/剧本/规则）
- 搜索功能
- 查看/删除操作
- 分页功能

---

## 💡 重要提示

### ⚠️ 必须先确认的事项

1. **页面文件已创建**
   ```bash
   确认这两个文件存在：
   - botc-admin/pages/botc/wiki/sync.vue ✅
   - botc-admin/pages/botc/wiki/list.vue ✅
   ```

2. **路由已配置**
   ```bash
   确认 pages.json 中已添加：
   - pages/botc/wiki/sync ✅
   - pages/botc/wiki/list ✅
   ```

3. **云函数已上传**
   ```bash
   确认已上传：
   - wiki-admin-sync-all ✅
   - wiki-admin-sync-single ✅
   ```

如果以上都确认了，添加菜单后应该能正常使用！

---

## 🆘 如果还是有问题？

### 临时解决方案：直接访问URL

即使菜单不显示，您也可以在浏览器地址栏直接输入：

**百科同步页面**：
```
http://localhost:8080/#/pages/botc/wiki/sync
```

**百科管理页面**：
```
http://localhost:8080/#/pages/botc/wiki/list
```

**先用功能，菜单慢慢调整！**

---

## 🎊 添加完成

按照上述步骤操作后，您应该能在管理后台看到：

✅ 血染钟楼管理
   ✅ 百科同步
   ✅ 百科管理

**祝您添加顺利！** 🚀

---

**文档创建**: 2025年10月17日  
**适用版本**: uni-admin 管理后台

