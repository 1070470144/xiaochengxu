# èœå•ä¸æ˜¾ç¤ºé—®é¢˜æ’æŸ¥æŒ‡å—

## ğŸ” é—®é¢˜ç°è±¡

å·²åœ¨ `opendb-admin-menus` è¡¨ä¸­æ·»åŠ äº† "å‰§æœ¬ç®¡ç†" èœå•ï¼Œä½†åˆ·æ–°åä»ç„¶çœ‹ä¸åˆ°ã€‚

---

## âœ… å¿«é€Ÿè§£å†³æ–¹æ¡ˆï¼ˆæŒ‰é¡ºåºå°è¯•ï¼‰

### æ–¹æ¡ˆ1ï¼šå¼ºåˆ¶åˆ·æ–° + æ¸…é™¤ç¼“å­˜

```
1. æŒ‰ Ctrl + Shift + Delete æ‰“å¼€æ¸…é™¤ç¼“å­˜çª—å£
2. å‹¾é€‰ï¼š
   âœ… Cookie å’Œå…¶ä»–ç½‘ç«™æ•°æ®
   âœ… ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶
3. ç‚¹å‡» "æ¸…é™¤æ•°æ®"
4. å…³é—­æµè§ˆå™¨
5. é‡æ–°æ‰“å¼€æµè§ˆå™¨
6. é‡æ–°ç™»å½•ç®¡ç†åå°
```

### æ–¹æ¡ˆ2ï¼šæ£€æŸ¥çˆ¶èœå•æ˜¯å¦å­˜åœ¨

åœ¨ uniCloud Web æ§åˆ¶å°ä¸­ï¼š

```
1. è¿›å…¥ opendb-admin-menus è¡¨
2. æœç´¢ menu_id = "botc-manage"
3. ç¡®è®¤è¯¥è®°å½•å­˜åœ¨ä¸” enable = true
```

**å¦‚æœæ²¡æœ‰æ‰¾åˆ° "botc-manage"ï¼Œéœ€è¦å…ˆæ·»åŠ çˆ¶èœå•ï¼š**

```json
{
  "menu_id": "botc-manage",
  "name": "è¡€æŸ“é’Ÿæ¥¼ç®¡ç†",
  "icon": "admin-icons-apps",
  "url": "",
  "sort": 100,
  "parent_id": "",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

### æ–¹æ¡ˆ3ï¼šé‡æ–°ç™»å½•

```
1. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ
2. é€€å‡ºç™»å½•
3. é‡æ–°ç™»å½•
4. æŸ¥çœ‹å·¦ä¾§èœå•
```

### æ–¹æ¡ˆ4ï¼šæ£€æŸ¥æ‰€æœ‰è¡€æŸ“é’Ÿæ¥¼ç®¡ç†çš„å­èœå•

ç¡®ä¿ä»¥ä¸‹4ä¸ªèœå•éƒ½å­˜åœ¨ï¼š

#### 1. åº—é“ºè®¤è¯å®¡æ ¸
```json
{
  "menu_id": "botc-shop-verify",
  "name": "åº—é“ºè®¤è¯å®¡æ ¸",
  "icon": "admin-icons-order",
  "url": "/pages/botc/shop/verify-list",
  "sort": 101,
  "parent_id": "botc-manage",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

#### 2. æ‹¼è½¦ç®¡ç†
```json
{
  "menu_id": "botc-carpool",
  "name": "æ‹¼è½¦ç®¡ç†",
  "icon": "admin-icons-car",
  "url": "/pages/botc/carpool/list",
  "sort": 102,
  "parent_id": "botc-manage",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

#### 3. å¸–å­å®¡æ ¸
```json
{
  "menu_id": "botc-post-audit",
  "name": "å¸–å­å®¡æ ¸",
  "icon": "admin-icons-read",
  "url": "/pages/botc/post/audit-list",
  "sort": 103,
  "parent_id": "botc-manage",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

#### 4. å‰§æœ¬ç®¡ç†ï¼ˆæ–°å¢ï¼‰
```json
{
  "menu_id": "botc-script-manage",
  "name": "å‰§æœ¬ç®¡ç†",
  "icon": "admin-icons-book",
  "url": "/pages/botc/script/list",
  "sort": 104,
  "parent_id": "botc-manage",
  "permission": [],
  "enable": true,
  "create_date": 1702800000000
}
```

### æ–¹æ¡ˆ5ï¼šä½¿ç”¨æ•°æ®åº“åˆå§‹åŒ–åŠŸèƒ½

å¦‚æœä»¥ä¸Šæ–¹æ¡ˆéƒ½ä¸è¡Œï¼Œå¯ä»¥æ‰¹é‡åˆå§‹åŒ–èœå•ï¼š

#### åœ¨ HBuilderX ä¸­ï¼š

```
1. æ‰¾åˆ°æ–‡ä»¶ï¼š
   botc-admin/uniCloud-aliyun/database/opendb-admin-menus.init_data.json

2. å³é”®ç‚¹å‡»è¯¥æ–‡ä»¶

3. é€‰æ‹© "åˆå§‹åŒ–æ•°æ®åº“"

4. åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼š
   - é€‰æ‹©æœåŠ¡ç©ºé—´
   - å‹¾é€‰ "opendb-admin-menus"
   - é€‰æ‹©åˆå§‹åŒ–æ–¹å¼ï¼š
     âœ… è¿½åŠ ï¼ˆå¦‚æœè¡¨ä¸­å·²æœ‰å…¶ä»–èœå•ï¼‰
     æˆ–
     âœ… è¦†ç›–ï¼ˆå¦‚æœè¦å®Œå…¨é‡ç½®èœå•ï¼‰

5. ç‚¹å‡»ç¡®å®š

6. ç­‰å¾…åˆå§‹åŒ–å®Œæˆ

7. åˆ·æ–°ç®¡ç†åå°
```

---

## ğŸ” æ·±å…¥æ’æŸ¥

### æ£€æŸ¥ç‚¹1ï¼šæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°

```
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° "Console" æ ‡ç­¾
3. åˆ·æ–°é¡µé¢
4. æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
```

**å¸¸è§é”™è¯¯ï¼š**
- `menu_id é‡å¤` â†’ åˆ é™¤é‡å¤è®°å½•
- `permission æƒé™é”™è¯¯` â†’ æ£€æŸ¥ç”¨æˆ·æƒé™
- `404 æ‰¾ä¸åˆ°é¡µé¢` â†’ æ£€æŸ¥è·¯ç”±é…ç½®

### æ£€æŸ¥ç‚¹2ï¼šç¡®è®¤ç™»å½•ç”¨æˆ·æƒé™

```
1. åœ¨ uniCloud Web æ§åˆ¶å°
2. è¿›å…¥ uni-id-users è¡¨
3. æ‰¾åˆ°æ‚¨çš„ç™»å½•è´¦å·
4. æŸ¥çœ‹ role å­—æ®µ
5. ç¡®è®¤æœ‰ "admin" æƒé™
```

### æ£€æŸ¥ç‚¹3ï¼šæ£€æŸ¥èœå•é…ç½®çš„å­—æ®µ

åœ¨æ•°æ®åº“ä¸­æ£€æŸ¥æ‚¨æ·»åŠ çš„è®°å½•ï¼š

| å­—æ®µ | å½“å‰å€¼ | æ˜¯å¦æ­£ç¡® |
|------|--------|----------|
| menu_id | "botc-script-manage" | âœ… |
| name | "å‰§æœ¬ç®¡ç†" | âœ… |
| parent_id | "botc-manage" | âš ï¸ éœ€ç¡®è®¤çˆ¶èœå•å­˜åœ¨ |
| enable | true | âœ… |
| url | "/pages/botc/script/list" | âœ… |
| sort | 104 | âœ… |

---

## ğŸ¯ æœ€å¯èƒ½çš„åŸå› 

### åŸå› 1ï¼šçˆ¶èœå• "botc-manage" ä¸å­˜åœ¨

**ç—‡çŠ¶ï¼š**
- å­èœå•æ·»åŠ æˆåŠŸ
- ä½†æ˜¯çœ‹ä¸åˆ°ä»»ä½• "è¡€æŸ“é’Ÿæ¥¼ç®¡ç†" ç›¸å…³èœå•

**è§£å†³ï¼š**
å…ˆæ·»åŠ çˆ¶èœå•ï¼Œç„¶åå†æ·»åŠ å­èœå•ï¼ˆå‚è€ƒæ–¹æ¡ˆ2ï¼‰

### åŸå› 2ï¼šæµè§ˆå™¨ç¼“å­˜

**ç—‡çŠ¶ï¼š**
- æ•°æ®åº“ä¸­æ•°æ®æ­£ç¡®
- åˆ·æ–°æ— æ•ˆ

**è§£å†³ï¼š**
æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ + é‡æ–°ç™»å½•ï¼ˆå‚è€ƒæ–¹æ¡ˆ1ï¼‰

### åŸå› 3ï¼š_id å­—æ®µå†²çª

**ç—‡çŠ¶ï¼š**
- æ·»åŠ æ—¶æŠ¥é”™ "å”¯ä¸€ç´¢å¼•å€¼é‡å¤"

**è§£å†³ï¼š**
```
1. ä¸è¦æ‰‹åŠ¨å¡«å†™ _id å­—æ®µ
2. è®©æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆ _id
3. æˆ–è€…åˆ é™¤ _id å­—æ®µï¼Œåªä¿ç•™ menu_id
```

---

## ğŸ“ å®Œæ•´æ£€æŸ¥æ¸…å•

è¯·é€é¡¹æ£€æŸ¥ï¼š

### æ•°æ®åº“æ£€æŸ¥
- [ ] `opendb-admin-menus` è¡¨ä¸­å­˜åœ¨ `menu_id = "botc-manage"` ä¸” `enable = true`
- [ ] `opendb-admin-menus` è¡¨ä¸­å­˜åœ¨ `menu_id = "botc-script-manage"` ä¸” `enable = true`
- [ ] "å‰§æœ¬ç®¡ç†" çš„ `parent_id = "botc-manage"`
- [ ] "å‰§æœ¬ç®¡ç†" çš„ `url = "/pages/botc/script/list"`
- [ ] æ²¡æœ‰é‡å¤çš„ `menu_id` æˆ– `_id`

### ç¼“å­˜æ£€æŸ¥
- [ ] å·²æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- [ ] å·²å…³é—­å¹¶é‡æ–°æ‰“å¼€æµè§ˆå™¨
- [ ] å·²é‡æ–°ç™»å½•ç®¡ç†åå°

### æƒé™æ£€æŸ¥
- [ ] ç™»å½•ç”¨æˆ·æœ‰ admin æƒé™
- [ ] `permission` å­—æ®µä¸ºç©ºæ•°ç»„ `[]`

### è·¯ç”±æ£€æŸ¥
- [ ] `botc-admin/pages.json` ä¸­å­˜åœ¨ `/pages/botc/script/list` è·¯ç”±
- [ ] `botc-admin/pages/botc/script/list.vue` æ–‡ä»¶å­˜åœ¨

---

## ğŸ”„ ç»ˆæè§£å†³æ–¹æ¡ˆ

å¦‚æœä»¥ä¸Šæ‰€æœ‰æ–¹æ¡ˆéƒ½ä¸è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

### æ­¥éª¤1ï¼šå¤‡ä»½ç°æœ‰èœå•

```
1. åœ¨ uniCloud Web æ§åˆ¶å°
2. è¿›å…¥ opendb-admin-menus è¡¨
3. å¯¼å‡ºæ•°æ®ï¼ˆå¤‡ä»½ï¼‰
```

### æ­¥éª¤2ï¼šåˆ é™¤æ‰€æœ‰è¡€æŸ“é’Ÿæ¥¼ç›¸å…³èœå•

```
åˆ é™¤ä»¥ä¸‹ menu_id çš„è®°å½•ï¼š
- botc-manage
- botc-shop-verify
- botc-carpool
- botc-post-audit
- botc-script-manage
```

### æ­¥éª¤3ï¼šä½¿ç”¨ HBuilderX é‡æ–°åˆå§‹åŒ–

```
1. å³é”® opendb-admin-menus.init_data.json
2. é€‰æ‹© "åˆå§‹åŒ–æ•°æ®åº“"
3. é€‰æ‹© "è¿½åŠ " æ¨¡å¼
4. ç­‰å¾…å®Œæˆ
```

### æ­¥éª¤4ï¼šå¼ºåˆ¶åˆ·æ–°

```
1. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
2. å…³é—­æµè§ˆå™¨
3. é‡æ–°æ‰“å¼€
4. é‡æ–°ç™»å½•ç®¡ç†åå°
```

---

## ğŸ’¡ å¿«é€ŸéªŒè¯

æ‰§è¡Œä»¥ä¸‹SQLæŸ¥è¯¢éªŒè¯æ•°æ®ï¼š

```sql
-- æŸ¥è¯¢çˆ¶èœå•
SELECT * FROM `opendb-admin-menus` WHERE menu_id = 'botc-manage'

-- æŸ¥è¯¢æ‰€æœ‰å­èœå•
SELECT * FROM `opendb-admin-menus` WHERE parent_id = 'botc-manage'

-- æŸ¥è¯¢å‰§æœ¬ç®¡ç†èœå•
SELECT * FROM `opendb-admin-menus` WHERE menu_id = 'botc-script-manage'
```

**æœŸæœ›ç»“æœï¼š**
- ç¬¬1æ¡æŸ¥è¯¢ï¼šè¿”å›1æ¡è®°å½•ï¼ˆçˆ¶èœå•ï¼‰
- ç¬¬2æ¡æŸ¥è¯¢ï¼šè¿”å›4æ¡è®°å½•ï¼ˆ4ä¸ªå­èœå•ï¼‰
- ç¬¬3æ¡æŸ¥è¯¢ï¼šè¿”å›1æ¡è®°å½•ï¼ˆå‰§æœ¬ç®¡ç†ï¼‰

---

## ğŸ“ ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **æµè§ˆå™¨æ§åˆ¶å°æˆªå›¾**ï¼ˆF12 â†’ Consoleï¼‰
2. **opendb-admin-menus è¡¨æ•°æ®æˆªå›¾**ï¼ˆæ˜¾ç¤ºæ‰€æœ‰ botc ç›¸å…³è®°å½•ï¼‰
3. **ç®¡ç†åå°å·¦ä¾§èœå•æˆªå›¾**
4. **æ˜¯å¦çœ‹åˆ°å…¶ä»– "è¡€æŸ“é’Ÿæ¥¼ç®¡ç†" çš„å­èœå•ï¼Ÿ**
   - åº—é“ºè®¤è¯å®¡æ ¸
   - æ‹¼è½¦ç®¡ç†
   - å¸–å­å®¡æ ¸

---

## âœ¨ æˆåŠŸæ ‡å¿—

èœå•æ­£ç¡®æ˜¾ç¤ºåï¼Œåº”è¯¥çœ‹åˆ°ï¼š

```
ğŸ“ è¡€æŸ“é’Ÿæ¥¼ç®¡ç† â–¼
 â”œâ”€â”€ ğŸ“„ åº—é“ºè®¤è¯å®¡æ ¸
 â”œâ”€â”€ ğŸš— æ‹¼è½¦ç®¡ç†
 â”œâ”€â”€ ğŸ“ å¸–å­å®¡æ ¸
 â””â”€â”€ ğŸ“– å‰§æœ¬ç®¡ç†  âœ¨ è¿™ä¸ªå°±æ˜¯æ–°æ·»åŠ çš„
```

ç‚¹å‡» "å‰§æœ¬ç®¡ç†" åº”è¯¥èƒ½æ‰“å¼€å‰§æœ¬åˆ—è¡¨é¡µé¢ã€‚

