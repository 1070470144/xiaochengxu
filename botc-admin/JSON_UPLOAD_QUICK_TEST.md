# 🧪 JSON上传功能快速测试

## ✅ 测试步骤

### 1. 打开管理后台
```
在浏览器中访问管理后台
进入：BOTC管理 → 剧本管理 → 点击「添加」按钮
```

### 2. 找到JSON上传区域
```
页面下方「剧本JSON文件」部分
应该看到：
┌─────────────────────────┐
│                         │
│   📁 选择JSON文件        │
│                         │
│ 支持标准血染钟楼JSON格式  │
└─────────────────────────┘
```

### 3. 点击上传按钮
```
点击「📁 选择JSON文件」
弹出文件选择对话框
```

### 4. 选择JSON文件
```
选择你的JSON文件（例如：传奇之夜.json）
```

### 5. 验证结果
```
应该立即显示：
┌─────────────────────────────┐
│ ✅ 传奇之夜.json    🗑️ 移除  │
│ 大小：125.5 KB              │
│ 角色数：18                  │
└─────────────────────────────┘

并且：
- 标题自动填充为：传奇之夜
- 作者自动填充为：Sui染钟楼
- 描述自动填充（如果meta中有）
```

### 6. 保存剧本
```
填写其他必填信息：
- 剧本类型：选择「推理」或「娱乐」
- 状态：选择「已发布」

点击「保存」按钮
```

### 7. 验证数据库
```
在uniCloud控制台：
1. 进入「云数据库」
2. 打开 botc-scripts 集合
3. 找到刚才添加的剧本
4. 查看 json_data 字段
5. 应该包含完整的数组数据
```

### 8. 用户端测试
```
1. 打开小程序
2. 进入剧本列表
3. 找到刚才添加的剧本
4. 进入详情页
5. 点击「🔗 复制JSON链接」
6. 在浏览器访问复制的链接
7. 应该看到完整的JSON数组
```

### 9. 血染工具测试
```
1. 打开 https://botcgrimoire.top
2. 点击「导入URL」
3. 粘贴复制的链接
4. 验证：
   ✅ 成功导入
   ✅ 显示所有角色
   ✅ 无CORS错误
```

---

## 🐛 如果遇到问题

### 问题1：点击按钮没反应
**解决**：刷新页面重试

### 问题2：选择文件后没有显示
**解决**：
1. 打开浏览器控制台
2. 查看错误信息
3. 确认JSON格式正确（必须是数组）

### 问题3：提示格式错误
**检查JSON格式**：
- 第一个字符必须是 `[`
- 最后一个字符必须是 `]`
- 每个对象用 `{}` 包裹
- 对象之间用 `,` 分隔

---

## ✅ 预期效果

### 上传成功后
- ✅ 显示文件信息
- ✅ 自动填充表单
- ✅ 可以移除重新上传
- ✅ 保存到数据库
- ✅ 用户端可以访问

---

现在就去测试吧！🚀

