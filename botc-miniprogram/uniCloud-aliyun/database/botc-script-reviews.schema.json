{
  "bsonType": "object",
  "description": "剧本评价表",
  "required": ["script_id", "user_id", "content", "rating"],
  "properties": {
    "_id": {
      "description": "评价ID"
    },
    "script_id": {
      "bsonType": "string",
      "description": "剧本ID",
      "foreignKey": "botc-scripts._id"
    },
    "user_id": {
      "bsonType": "string",
      "description": "评价用户ID",
      "foreignKey": "uni-id-users._id"
    },
    "content": {
      "bsonType": "string",
      "description": "评价内容",
      "maxLength": 500
    },
    "rating": {
      "bsonType": "int",
      "description": "评分（1-5星）",
      "minimum": 1,
      "maximum": 5
    },
    "like_count": {
      "bsonType": "int",
      "description": "点赞数",
      "default": 0
    },
    "status": {
      "bsonType": "int",
      "description": "状态（0-待审核，1-已发布，2-已隐藏）",
      "enum": [0, 1, 2],
      "default": 1
    },
    "created_at": {
      "bsonType": "timestamp",
      "description": "创建时间"
    },
    "updated_at": {
      "bsonType": "timestamp",
      "description": "更新时间"
    }
  },
  "permission": {
    "read": true,
    "create": "auth.uid != null",
    "update": "auth.uid == doc.user_id",
    "delete": "auth.uid == doc.user_id"
  }
}

