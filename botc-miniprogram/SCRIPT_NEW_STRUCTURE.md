# 剧本功能新架构说明

## 📐 页面结构

### 新的三层架构

```
剧本（TabBar入口）
 └─ pages/script/index/index.vue（首页）
     ├─ 两个主按钮
     │   ├─ 🔍 查找剧本 → pages/script/list/list.vue
     │   └─ 📊 查看榜单 → pages/script/ranking/ranking.vue
     └─ 🔥 热门剧本展示（TOP 10）
```

---

## 📄 页面详情

### 1. 剧本首页（index/index.vue）

**路径：** `pages/script/index/index.vue`  
**TabBar：** 剧本（入口页）  
**导航栏标题：** 剧本

**布局：**
```
┌────────────────────────────────┐
│  🔍 查找剧本    📊 查看榜单    │
│  (渐变按钮)     (渐变按钮)      │
├────────────────────────────────┤
│  🔥 热门剧本                    │
│  [No.1 剧本卡片]                │
│  [No.2 剧本卡片]                │
│  [No.3 剧本卡片]                │
│  ...                            │
└────────────────────────────────┘
```

**功能：**
- ✅ 两个渐变主按钮（紫色+粉色）
- ✅ 显示TOP 10热门剧本（按浏览量排序）
- ✅ 热门剧本带排名标识（前3名金银铜）
- ✅ 下拉刷新

**按钮跳转：**
- 查找剧本 → `pages/script/list/list`
- 查看榜单 → `pages/script/ranking/ranking`

---

### 2. 查找剧本页面（list/list.vue）

**路径：** `pages/script/list/list.vue`  
**导航栏标题：** 查找剧本

**布局：**
```
┌────────────────────────────────┐
│  [搜索框]                       │
├────────────────────────────────┤
│  [全部] [热门] [最新] [高分]    │
│  [推理] [娱乐]                  │
├────────────────────────────────┤
│  [剧本卡片 - 传统样式]          │
│  [剧本卡片 - 传统样式]          │
│  [剧本卡片 - 传统样式]          │
│  ...                            │
└────────────────────────────────┘
```

**功能：**
- ✅ 搜索框（搜索剧本名称、作者）
- ✅ 筛选标签（全部/热门/最新/高分/推理/娱乐）
- ✅ 传统卡片列表（垂直滚动）
- ✅ 下拉刷新
- ✅ 上拉加载更多
- ✅ 点击卡片跳转详情

**排序规则：**
- 全部：按发布时间倒序
- 热门：按浏览量倒序
- 最新：按发布时间倒序
- 高分：按评分倒序
- 推理：推理类型（script_type=1）
- 娱乐：娱乐类型（script_type=2）

---

### 3. 查看榜单页面（ranking/ranking.vue）

**路径：** `pages/script/ranking/ranking.vue`  
**导航栏标题：** 剧本榜单

**布局：**
```
┌────────────────────────────────┐
│  [搜索框]                       │
├────────────────────────────────┤
│  📘 最新剧本            更多 >  │
│  [横向滚动卡片...]              │
├────────────────────────────────┤
│  🔥 萌萌想玩热榜        更多 >  │
│  [带排名徽章的卡片...]          │
├────────────────────────────────┤
│  🔍 近期推理剧本        更多 >  │
│  [推理剧本卡片...]              │
├────────────────────────────────┤
│  🎉 近期娱乐剧本        更多 >  │
│  [娱乐剧本卡片...]              │
├────────────────────────────────┤
│  🏆 萌萌推理高分榜      更多 >  │
│  [高分推理剧本...]              │
├────────────────────────────────┤
│  🏆 萌萌娱乐高分榜      更多 >  │
│  [高分娱乐剧本...]              │
└────────────────────────────────┘
```

**功能：**
- ✅ 6个特色榜单
- ✅ 横向滚动卡片展示
- ✅ 排名徽章（热榜和高分榜）
- ✅ 搜索跳转到查找剧本页面
- ✅ 下拉刷新所有榜单
- ✅ 点击"更多"跳转到查找剧本页面（带类型参数）

---

## 🎨 视觉设计

### 首页主按钮渐变色

**查找剧本按钮：**
- 渐变：紫色 → 深紫色
- 图标：🔍 80rpx
- 文字：查找剧本（32rpx bold）
- 描述：搜索、筛选所有剧本（24rpx）

**查看榜单按钮：**
- 渐变：粉红色 → 红色
- 图标：📊 80rpx
- 文字：查看榜单（32rpx bold）
- 描述：热门、高分、最新榜单（24rpx）

### 热门剧本卡片

- 横向布局：封面（200rpx）+ 信息区
- 排名徽章：圆形，金银铜渐变
- 评分高亮：橙红色
- 类型标签：推理（蓝色）/ 娱乐（绿色）

---

## 🔄 用户流程

### 主流程1：快速查找剧本

```
TabBar点击"剧本" 
  → 首页 
  → 点击"查找剧本" 
  → 查找剧本页面 
  → 筛选/搜索 
  → 点击卡片 
  → 剧本详情
```

### 主流程2：浏览榜单

```
TabBar点击"剧本" 
  → 首页 
  → 点击"查看榜单" 
  → 榜单页面 
  → 横向滚动浏览 
  → 点击卡片 
  → 剧本详情
```

### 主流程3：查看热门剧本

```
TabBar点击"剧本" 
  → 首页 
  → 直接看到TOP 10热门剧本 
  → 点击卡片 
  → 剧本详情
```

---

## 📊 数据统计

### 首页热门剧本

- 查询：`botc-scripts` 表
- 筛选：`status = 1`（已发布）
- 排序：`view_count desc`（浏览量倒序）
- 数量：10条

### 榜单页数据

| 榜单名称 | 筛选条件 | 排序规则 | 数量 |
|---------|---------|---------|------|
| 最新剧本 | status=1 | published_at desc | 10 |
| 想玩热榜 | status=1 | view_count desc | 10 |
| 近期推理 | status=1, type=1, 发布≤30天 | published_at desc | 10 |
| 近期娱乐 | status=1, type=2, 发布≤30天 | published_at desc | 10 |
| 推理高分 | status=1, type=1, rating≥4, count≥5 | rating desc | 10 |
| 娱乐高分 | status=1, type=2, rating≥4, count≥5 | rating desc | 10 |

---

## 🚀 技术实现

### 路由配置（pages.json）

```json
{
  "pages": [
    {
      "path": "pages/script/index/index",
      "style": {
        "navigationBarTitleText": "剧本",
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/script/list/list",
      "style": {
        "navigationBarTitleText": "查找剧本",
        "enablePullDownRefresh": true
      }
    },
    {
      "path": "pages/script/ranking/ranking",
      "style": {
        "navigationBarTitleText": "剧本榜单",
        "enablePullDownRefresh": true
      }
    }
  ]
}
```

### TabBar配置

```json
{
  "pagePath": "pages/script/index/index",
  "iconPath": "static/tabbar/script.png",
  "selectedIconPath": "static/tabbar/script_active.png",
  "text": "剧本"
}
```

---

## ✨ 功能亮点

### 1. 双按钮设计
- 清晰的功能分区
- 渐变色视觉吸引力
- 直观的图标和文字说明

### 2. 热门展示
- 首页直接看到热门剧本
- 带排名标识（金银铜）
- 减少用户操作步骤

### 3. 多榜单体系
- 6个特色榜单满足不同需求
- 横向滚动节省空间
- 自动评分排序

### 4. 灵活筛选
- 传统列表页支持多维度筛选
- 搜索功能快速定位
- 支持推理/娱乐分类

---

## 📝 开发要点

### 1. 数据库字段

确保 `botc-scripts` 表包含：
- `script_type`：1-推理，2-娱乐
- `rating`：评分（0-5）
- `rating_count`：评分人数
- `view_count`：浏览量
- `published_at`：发布时间
- `status`：状态（1-已发布）

### 2. 性能优化

- 首页只加载10条热门剧本
- 榜单页并行加载6个榜单
- 列表页支持分页加载
- 使用下拉刷新更新数据

### 3. 用户体验

- 所有页面支持下拉刷新
- 列表页支持上拉加载更多
- 按钮有按压反馈动画
- 卡片点击有缩放效果

---

## 🎯 总结

新的剧本功能架构：
- ✅ 3个页面：首页、列表页、榜单页
- ✅ 双按钮入口：查找剧本 + 查看榜单
- ✅ 热门展示：首页显示TOP 10
- ✅ 6个榜单：满足不同发现需求
- ✅ 灵活筛选：支持搜索和多维度筛选
- ✅ 现代化设计：渐变按钮、横向滚动、排名徽章

**用户可以更快速、更便捷地发现优质剧本！** 🎉

