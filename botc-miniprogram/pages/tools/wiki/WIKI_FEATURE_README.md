# è¡€æŸ“ç™¾ç§‘åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ‰ åŠŸèƒ½å·²å®Œæˆï¼

### âœ… å·²å®ç°çš„åŠŸèƒ½

#### 1. **åç«¯äº‘å‡½æ•°ï¼ˆ3ä¸ªï¼‰**
- âœ… `wiki-parse-url` - URLè§£æåŠŸèƒ½
- âœ… `wiki-search` - æœç´¢åŠŸèƒ½
- âœ… `wiki-detail` - è¯¦æƒ…æŸ¥è¯¢åŠŸèƒ½

#### 2. **æ•°æ®åº“é›†åˆï¼ˆ3ä¸ªï¼‰**
- âœ… `wiki_entries` - ç™¾ç§‘è¯æ¡è¡¨
- âœ… `wiki_favorites` - ç”¨æˆ·æ”¶è—è¡¨
- âœ… `wiki_search_history` - æœç´¢å†å²è¡¨

#### 3. **å°ç¨‹åºé¡µé¢ï¼ˆ2ä¸ªï¼‰**
- âœ… `pages/tools/wiki/wiki.vue` - ç™¾ç§‘ä¸»é¡µï¼ˆå·²å‡çº§ï¼‰
- âœ… `pages/tools/wiki/detail.vue` - è¯æ¡è¯¦æƒ…é¡µ

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šä¸Šä¼ äº‘å‡½æ•°

åœ¨ HBuilderX ä¸­ï¼š

```bash
1. å³é”® uniCloud-aliyun/cloudfunctions/wiki-parse-url
   â†’ ä¸Šä¼ éƒ¨ç½²

2. å³é”® uniCloud-aliyun/cloudfunctions/wiki-search
   â†’ ä¸Šä¼ éƒ¨ç½²

3. å³é”® uniCloud-aliyun/cloudfunctions/wiki-detail
   â†’ ä¸Šä¼ éƒ¨ç½²
```

**æ³¨æ„**ï¼šé¦–æ¬¡ä¸Šä¼ æ—¶ï¼Œäº‘å‡½æ•°ä¼šè‡ªåŠ¨å®‰è£… `cheerio` ä¾èµ–ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…1-2åˆ†é’Ÿã€‚

---

### æ­¥éª¤2ï¼šåˆ›å»ºæ•°æ®åº“é›†åˆ

åœ¨ uniCloud Webæ§åˆ¶å°ï¼ˆhttps://unicloud.dcloud.net.cnï¼‰ï¼š

#### åˆ›å»ºé›†åˆ1ï¼šwiki_entries
```bash
1. è¿›å…¥äº‘æ•°æ®åº“
2. ç‚¹å‡»"æ–°å»ºé›†åˆ"
3. é›†åˆåç§°ï¼šwiki_entries
4. ç‚¹å‡»"ç¡®å®š"
5. è¿›å…¥é›†åˆ â†’ ç‚¹å‡»"DB Schema" â†’ å¯¼å…¥Schema
6. å¤åˆ¶ uniCloud-aliyun/database/wiki_entries.schema.json å†…å®¹
7. ä¿å­˜
```

#### åˆ›å»ºé›†åˆ2ï¼šwiki_favorites
```bash
1. æ–°å»ºé›†åˆï¼šwiki_favorites
2. å¯¼å…¥ Schemaï¼šwiki_favorites.schema.json
3. ä¿å­˜
```

#### åˆ›å»ºé›†åˆ3ï¼šwiki_search_history
```bash
1. æ–°å»ºé›†åˆï¼šwiki_search_history
2. å¯¼å…¥ Schemaï¼šwiki_search_history.schema.json
3. ä¿å­˜
```

#### è®¾ç½®æ•°æ®åº“æƒé™
```json
{
  "read": true,
  "create": "auth.uid != null",
  "update": "auth.uid != null && doc.user_id == auth.uid",
  "delete": "auth.uid != null && doc.user_id == auth.uid"
}
```

---

### æ­¥éª¤3ï¼šé…ç½®é¡µé¢è·¯ç”±

åœ¨ `pages.json` ä¸­æ·»åŠ è¯¦æƒ…é¡µè·¯ç”±ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š

```json
{
  "path": "pages/tools/wiki/detail",
  "style": {
    "navigationBarTitleText": "ç™¾ç§‘è¯¦æƒ…",
    "enablePullDownRefresh": false
  }
}
```

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç”¨æˆ·æ“ä½œæµç¨‹

#### 1. è¿›å…¥ç™¾ç§‘é¡µé¢
```
æ‰“å¼€å°ç¨‹åº â†’ å·¥å…· â†’ è¡€æŸ“ç™¾ç§‘
```

#### 2. å¯¼å…¥ç™¾ç§‘å†…å®¹
```
æ–¹æ³•1ï¼šæ‰‹åŠ¨è¾“å…¥URL
1. ç‚¹å‡»"å¯¼å…¥ç™¾ç§‘é“¾æ¥"æŒ‰é’®
2. è¾“å…¥é’Ÿæ¥¼ç™¾ç§‘çš„é¡µé¢URL
3. ç‚¹å‡»"å¼€å§‹å¯¼å…¥"
4. ç­‰å¾…è§£æï¼ˆçº¦3-5ç§’ï¼‰
5. è‡ªåŠ¨è·³è½¬åˆ°è¯¦æƒ…é¡µ

æ–¹æ³•2ï¼šç²˜è´´URL
1. åœ¨æµè§ˆå™¨ä¸­å¤åˆ¶ç™¾ç§‘URL
2. ç‚¹å‡»"å¯¼å…¥ç™¾ç§‘é“¾æ¥"
3. ç‚¹å‡»"ç²˜è´´"æŒ‰é’®
4. ç‚¹å‡»"å¼€å§‹å¯¼å…¥"
```

#### 3. æµè§ˆå†…å®¹
```
- æŸ¥çœ‹"æœ€è¿‘å¯¼å…¥"åŒºåŸŸçš„è¯æ¡
- ç‚¹å‡»è¯æ¡å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…
- ä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾å†…å®¹
```

#### 4. è¯æ¡è¯¦æƒ…é¡µ
```
- æŸ¥çœ‹å®Œæ•´å†…å®¹
- æŸ¥çœ‹è§’è‰²ä¿¡æ¯ï¼ˆé˜µè¥ã€èƒ½åŠ›ï¼‰
- é¢„è§ˆç›¸å…³å›¾ç‰‡
- ç‚¹å‡»ç›¸å…³é“¾æ¥å¯¼å…¥æ›´å¤šè¯æ¡
- æ”¶è—å¸¸ç”¨è¯æ¡
- å¤åˆ¶åŸæ–‡é“¾æ¥
```

---

## ğŸŒ æ”¯æŒçš„URLæ ¼å¼

### ç¤ºä¾‹URL

#### è§’è‰²é¡µé¢
```
https://clocktower-wiki.gstonegames.com/index.php?title=æ´—è¡£å¦‡
https://clocktower-wiki.gstonegames.com/index.php?title=å›¾ä¹¦ç®¡ç†å‘˜
https://clocktower-wiki.gstonegames.com/index.php?title=å°æ¶é­”
```

#### è§„åˆ™é¡µé¢
```
https://clocktower-wiki.gstonegames.com/index.php?title=è§„åˆ™æ¦‚è¦
https://clocktower-wiki.gstonegames.com/index.php?title=æœ¯è¯­æ±‡æ€»
https://clocktower-wiki.gstonegames.com/index.php?title=é‡è¦ç»†èŠ‚
```

#### å‰§æœ¬é¡µé¢
```
https://clocktower-wiki.gstonegames.com/index.php?title=æš—æµæ¶ŒåŠ¨
https://clocktower-wiki.gstonegames.com/index.php?title=é»¯æœˆåˆå‡
https://clocktower-wiki.gstonegames.com/index.php?title=æ¢¦æ®’æ˜¥å®µ
```

---

## ğŸ”§ æŠ€æœ¯è¯´æ˜

### å·¥ä½œåŸç†

```
ç”¨æˆ·è¾“å…¥URL
    â†“
å°ç¨‹åºè°ƒç”¨ wiki-parse-url äº‘å‡½æ•°
    â†“
äº‘å‡½æ•°æŠ“å–é’Ÿæ¥¼ç™¾ç§‘ç½‘é¡µ
    â†“
ä½¿ç”¨ cheerio è§£æ HTML
    â†“
æå–ç»“æ„åŒ–æ•°æ®ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€å›¾ç‰‡ç­‰ï¼‰
    â†“
ä¿å­˜åˆ°äº‘æ•°æ®åº“ï¼ˆç¼“å­˜7å¤©ï¼‰
    â†“
è¿”å›æ•°æ®ç»™å°ç¨‹åº
    â†“
å°ç¨‹åºå±•ç¤ºå†…å®¹
```

### ç¼“å­˜æœºåˆ¶

- **äº‘ç«¯ç¼“å­˜**ï¼š7å¤©
- **æœ¬åœ°ç¼“å­˜**ï¼šæµè§ˆè¿‡çš„è¯æ¡ä¼šåœ¨æœ¬åœ°ç¼“å­˜
- **ç¼“å­˜åˆ·æ–°**ï¼šç”¨æˆ·å¯ä»¥æ‰‹åŠ¨åˆ·æ–°ï¼ˆå¼€å‘ä¸­ï¼‰

### æ€§èƒ½ä¼˜åŒ–

- âœ… é¦–æ¬¡å¯¼å…¥ï¼š3-5ç§’ï¼ˆæŠ“å–+è§£æï¼‰
- âœ… äºŒæ¬¡è®¿é—®ï¼š<1ç§’ï¼ˆè¯»å–ç¼“å­˜ï¼‰
- âœ… å›¾ç‰‡æ‡’åŠ è½½
- âœ… åˆ†é¡µæŸ¥è¯¢

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å¯¼å…¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. URL æ˜¯å¦æ­£ç¡®ï¼ˆå¿…é¡»æ˜¯é’Ÿæ¥¼ç™¾ç§‘çš„é“¾æ¥ï¼‰
2. ç½‘ç»œæ˜¯å¦æ­£å¸¸
3. äº‘å‡½æ•°æ˜¯å¦å·²ä¸Šä¼ éƒ¨ç½²
4. æ•°æ®åº“é›†åˆæ˜¯å¦å·²åˆ›å»º

### Q2: è§£ææ—¶é—´å¤ªé•¿ï¼Ÿ
**A**: 
- é¦–æ¬¡è§£æéœ€è¦3-5ç§’ï¼ˆæŠ“å–ç½‘é¡µï¼‰
- äºŒæ¬¡è®¿é—®ä¼šä½¿ç”¨ç¼“å­˜ï¼Œç¬é—´åŠ è½½
- å¦‚æœè¶…è¿‡10ç§’ï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜

### Q3: éƒ¨åˆ†å†…å®¹æ˜¾ç¤ºä¸å…¨ï¼Ÿ
**A**:
- MediaWiki ç»“æ„å¤æ‚ï¼Œéƒ¨åˆ†ç‰¹æ®Šæ ¼å¼å¯èƒ½è§£æä¸å®Œæ•´
- å¯ä»¥ç‚¹å‡»"æŸ¥çœ‹åŸæ–‡"å¤åˆ¶é“¾æ¥ï¼Œåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹

### Q4: æ”¶è—åŠŸèƒ½ä¸å¯ç”¨ï¼Ÿ
**A**:
- éœ€è¦ç”¨æˆ·ç™»å½•åæ‰èƒ½ä½¿ç”¨æ”¶è—åŠŸèƒ½
- æ£€æŸ¥æ˜¯å¦å·²ç™»å½•å°ç¨‹åº

---

## ğŸ“Š æ•°æ®ç»Ÿè®¡

### äº‘å‡½æ•°è°ƒç”¨ç»Ÿè®¡
å¯ä»¥åœ¨ uniCloud Webæ§åˆ¶å°æŸ¥çœ‹ï¼š
- äº‘å‡½æ•°è°ƒç”¨æ¬¡æ•°
- å¹³å‡å“åº”æ—¶é—´
- é”™è¯¯ç‡

### ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡
- å¯¼å…¥æ¬¡æ•°
- æœç´¢çƒ­è¯
- çƒ­é—¨è¯æ¡

---

## ğŸ”„ åç»­ä¼˜åŒ–æ–¹å‘

### åŠŸèƒ½æ‰©å±•
- [ ] æœç´¢ç»“æœé¡µé¢ï¼ˆæ˜¾ç¤ºå¤šä¸ªç»“æœï¼‰
- [ ] æ”¶è—åˆ—è¡¨é¡µé¢
- [ ] æµè§ˆå†å²é¡µé¢
- [ ] çƒ­é—¨è¯æ¡æ¨è
- [ ] è¯æ¡åˆ†äº«åŠŸèƒ½
- [ ] ç¦»çº¿ä¸‹è½½åŠŸèƒ½

### æ€§èƒ½ä¼˜åŒ–
- [ ] å›¾ç‰‡CDNåŠ é€Ÿ
- [ ] é¢„åŠ è½½çƒ­é—¨è¯æ¡
- [ ] æœç´¢ç»“æœç¼“å­˜
- [ ] åˆ†æ‰¹åŠ è½½å›¾ç‰‡

### ç”¨æˆ·ä½“éªŒ
- [ ] éª¨æ¶å±åŠ è½½
- [ ] å†…å®¹ç›®å½•å¯¼èˆª
- [ ] å¤œé—´æ¨¡å¼
- [ ] å­—ä½“å¤§å°è°ƒèŠ‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°
4. è”ç³»å¼€å‘å›¢é˜Ÿ

### è°ƒè¯•æŠ€å·§
```javascript
// åœ¨äº‘å‡½æ•°ä¸­æ·»åŠ æ—¥å¿—
console.log('[wiki-parse] è°ƒè¯•ä¿¡æ¯:', data);

// åœ¨å°ç¨‹åºä¸­æŸ¥çœ‹è¿”å›æ•°æ®
console.log('äº‘å‡½æ•°è¿”å›:', res);
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-10-17)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒé’Ÿæ¥¼ç™¾ç§‘URLè§£æ
- âœ… æ”¯æŒè§’è‰²ã€è§„åˆ™ã€å‰§æœ¬ç­‰å¤šç§ç±»å‹
- âœ… æ”¯æŒæœç´¢åŠŸèƒ½
- âœ… æ”¯æŒæ”¶è—åŠŸèƒ½
- âœ… å®Œæ•´çš„ç¼“å­˜æœºåˆ¶

---

**ç»´æŠ¤äººå‘˜**: å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ17æ—¥  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0

