# 剧本榜单功能说明

## 📊 功能概述

全新的剧本页面采用多榜单展示模式，提供6个特色榜单，帮助玩家快速发现优质剧本。

---

## 🏆 榜单列表

### 1. 📘 最新剧本榜单
**排序规则：** 按发布时间倒序
**数据来源：** 所有已发布剧本
**显示数量：** 10个
**特点：** 实时展示最新发布的剧本

### 2. 🔥 萌萌想玩热榜
**排序规则：** 综合热度评分（浏览量 + 收藏量×10）
**数据来源：** 所有已发布剧本
**显示数量：** 10个，显示排名徽章
**特点：** 
- 反映玩家当前最想玩的剧本
- 前3名显示金银铜徽章
- 综合考虑浏览和收藏数据

### 3. 🔍 近期推理剧本
**排序规则：** 按发布时间倒序
**筛选条件：** 
- 剧本类型 = 推理（script_type = 1）
- 发布时间在最近30天内
**显示数量：** 10个
**特点：** 展示最新的推理类剧本

### 4. 🎉 近期娱乐剧本
**排序规则：** 按发布时间倒序
**筛选条件：** 
- 剧本类型 = 娱乐（script_type = 2）
- 发布时间在最近30天内
**显示数量：** 10个
**特点：** 展示最新的娱乐类剧本

### 5. 🏆 萌萌推理高分榜
**排序规则：** 
- 主排序：评分（rating）降序
- 次排序：评分人数（rating_count）降序
**筛选条件：** 
- 剧本类型 = 推理（script_type = 1）
- 评分 ≥ 4.0
- 评分人数 ≥ 5（确保评分有效性）
**显示数量：** 10个，显示排名徽章
**特点：** 
- 自动根据评分生成
- 只显示高质量剧本
- 确保有足够评价数量

### 6. 🏆 萌萌娱乐高分榜
**排序规则：** 
- 主排序：评分（rating）降序
- 次排序：评分人数（rating_count）降序
**筛选条件：** 
- 剧本类型 = 娱乐（script_type = 2）
- 评分 ≥ 4.0
- 评分人数 ≥ 5（确保评分有效性）
**显示数量：** 10个，显示排名徽章
**特点：** 
- 自动根据评分生成
- 只显示高质量剧本
- 确保有足够评价数量

---

## 🎨 界面特点

### 横向滚动卡片
- 每个榜单采用横向滚动设计
- 卡片宽度：240rpx
- 包含封面、标题、评分、元信息

### 排名徽章
- 前3名显示特殊徽章：
  - 🥇 第1名：金色渐变
  - 🥈 第2名：银色渐变
  - 🥉 第3名：铜色渐变
  - 4-10名：半透明黑色

### 标签系统
- **推理剧本**：蓝色标签
- **娱乐剧本**：绿色标签
- **热门标签**：红色标签
- **高分标签**：橙色标签
- **难度标签**：根据难度显示不同颜色

---

## 📦 数据库字段

### 新增字段：script_type
```json
{
  "script_type": {
    "bsonType": "int",
    "description": "剧本类型：1-推理，2-娱乐",
    "enum": [1, 2],
    "defaultValue": 1
  }
}
```

### 相关字段
- `rating`: 评分（0-5分）
- `rating_count`: 评分人数
- `view_count`: 浏览量
- `favorite_count`: 收藏量
- `published_at`: 发布时间
- `status`: 状态（0-待审核，1-已发布，2-已下架）

---

## 🔧 技术实现

### 查询优化
```javascript
// 热榜计算公式
heat_score = view_count + (favorite_count × 10)

// 高分榜筛选条件
rating >= 4.0 AND rating_count >= 5

// 近期剧本时间范围
published_at >= (当前时间 - 30天)
```

### 性能优化
- 所有榜单并行加载（Promise.all）
- 每个榜单限制10条数据
- 下拉刷新更新所有榜单
- 使用数据库索引优化查询

---

## 📱 用户体验

### 发现路径
1. **首页** → 剧本 → 浏览各个榜单
2. **搜索** → 直接搜索剧本名称或作者
3. **榜单** → 点击"更多"查看完整榜单（待开发）

### 交互反馈
- 卡片点击反馈
- 下拉刷新更新数据
- 榜单横向滚动流畅

---

## 🎯 后续扩展建议

### 1. 完整榜单页面
创建 `pages/script/ranking/ranking.vue` 展示完整榜单列表

### 2. 剧本搜索页面
创建 `pages/script/search/search.vue` 实现高级搜索

### 3. 个性化推荐
- 根据用户浏览历史推荐
- 根据用户收藏推荐
- 根据用户角色推荐

### 4. 更多榜单
- 📊 下载榜
- 💬 讨论度榜
- 🆕 本周新品
- 🎭 说书人推荐榜

### 5. 数据统计
- 榜单变化趋势
- 剧本热度曲线
- 评分分布图表

---

## 🔨 管理后台支持

已同步 `botc-scripts.schema.json` 到管理端，管理员可以：
1. 在管理后台编辑剧本类型
2. 查看各个榜单数据
3. 设置精选推荐剧本
4. 审核新发布剧本

---

## 📈 榜单更新机制

### 自动更新
- **高分榜**：实时根据评分自动生成
- **热榜**：实时根据浏览和收藏计算
- **最新榜**：新剧本发布后自动显示

### 手动更新
- 用户下拉刷新
- 进入页面时自动刷新

---

## ✨ 总结

新的剧本榜单系统提供了：
- ✅ 6个特色榜单
- ✅ 横向滚动卡片展示
- ✅ 排名徽章视觉效果
- ✅ 自动评分排序
- ✅ 推理/娱乐分类
- ✅ 实时热度计算

**帮助玩家快速发现优质剧本，提升用户体验！** 🎉

