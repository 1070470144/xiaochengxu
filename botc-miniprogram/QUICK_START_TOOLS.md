# 工具功能快速启动指南

## 🚀 一分钟快速测试

### 步骤 1: 编译小程序
```
在微信开发者工具中：
1. 点击"编译"按钮
2. 等待编译完成
```

### 步骤 2: 切换到工具Tab
```
点击底部 TabBar 的"工具"按钮
应该看到：工具箱页面，包含5个功能卡片
```

### 步骤 3: 测试点击跳转
```
✅ 点击"拼车组局" → 跳转到拼车列表页
✅ 点击"剧本上传" → 跳转到上传页面
✅ 点击"血染百科" → 跳转到百科页面
✅ 点击"说书人" → 跳转到说书人列表
✅ 点击"血染店铺" → 跳转到店铺列表
```

### 步骤 4: 测试剧本上传
```
1. 点击"剧本上传"
2. 粘贴测试JSON（见下方）
3. 查看解析结果
4. 点击"提交并生成预览图"
5. 需要先部署云函数（见下方）
```

## 📦 云函数部署

### 部署 script-upload 云函数

```
在HBuilderX中：
1. 右键 uniCloud-aliyun/cloudfunctions/script-upload
2. 选择"上传并运行"
3. 等待上传完成
4. 查看控制台显示"云函数上传成功"
```

### 验证云函数
```
在uniCloud Web控制台：
1. 进入"云函数"管理
2. 找到 script-upload
3. 查看函数信息
4. 可以测试运行
```

## 🧪 测试JSON示例

### 简单测试JSON（数组格式）
```json
[
  {
    "id": "_meta",
    "name": "测试剧本",
    "author": "测试作者"
  },
  {
    "id": "washerwoman",
    "name": "洗衣妇",
    "team": "townsfolk",
    "ability": "开局得知某位玩家的角色",
    "firstNight": 15
  },
  {
    "id": "librarian",
    "name": "图书管理员",
    "team": "townsfolk",
    "ability": "开局得知外来者的数量"
  },
  {
    "id": "drunk",
    "name": "酒鬼",
    "team": "outsider",
    "ability": "不知道自己的真实角色"
  },
  {
    "id": "poisoner",
    "name": "投毒者",
    "team": "minion",
    "ability": "每夜选择一人，其能力失效",
    "otherNight": 8
  },
  {
    "id": "imp",
    "name": "小恶魔",
    "team": "demon",
    "ability": "每夜选择一名玩家杀死",
    "otherNight": 21
  }
]
```

### 对象格式JSON
```json
{
  "name": "测试剧本2",
  "author": "测试作者2",
  "description": "这是一个测试剧本",
  "characters": [
    {
      "id": "washerwoman",
      "name": "洗衣妇",
      "team": "townsfolk",
      "ability": "开局得知某位玩家的角色"
    },
    {
      "id": "imp",
      "name": "小恶魔",
      "team": "demon",
      "ability": "每夜选择一名玩家杀死"
    }
  ]
}
```

## ✅ 功能验证清单

### 工具主页
- [ ] 页面正常显示
- [ ] 5个功能卡片都可见
- [ ] 每个卡片都有正确的图标和颜色
- [ ] 点击有视觉反馈（缩放）

### 剧本上传
- [ ] 页面正常打开
- [ ] 粘贴JSON后自动验证
- [ ] 格式错误时显示"✗ 格式错误"
- [ ] 格式正确时显示"✓ 格式正确"
- [ ] 自动解析并显示剧本信息
- [ ] 可以编辑表单
- [ ] 点击提交按钮有反应

### 血染百科
- [ ] 页面正常打开
- [ ] 可以切换分类
- [ ] 角色列表可以筛选
- [ ] 点击角色显示详情
- [ ] 搜索框正常显示

### 云函数
- [ ] 云函数部署成功
- [ ] 可以接收上传请求
- [ ] 可以生成SVG预览图
- [ ] 可以保存到数据库
- [ ] 返回成功结果

## 🐛 常见问题

### Q1: 点击工具Tab没反应
**A**: 
1. 检查 pages.json 的 tabBar 配置
2. 确认 pagePath 是 `pages/tools/index/index`
3. 重新编译项目

### Q2: 点击功能卡片没反应
**A**: 
1. 查看控制台是否有错误
2. 确认 pages.json 已注册目标页面
3. 检查跳转路径是否正确

### Q3: 上传提示"请先登录"
**A**: 
1. 云函数需要用户登录
2. 先在小程序中登录
3. 或修改云函数移除登录检查（测试用）

### Q4: 云函数部署失败
**A**: 
1. 检查 package.json 格式
2. 确认网络连接正常
3. 重新上传云函数

### Q5: 预览图未生成
**A**: 
1. 查看云函数日志
2. 检查JSON格式是否正确
3. 确认角色数据完整

## 📖 相关文档

- `pages/tools/SETUP_GUIDE.md` - 工具页面设置指南
- `pages/tools/AUTO_PREVIEW_GENERATION_GUIDE.md` - 预览图生成详细说明
- `TOOLS_FEATURE_COMPLETE.md` - 功能完整说明

## 🎯 下一步

### 立即可以做的
1. ✅ 测试工具页面跳转
2. ✅ 测试剧本上传功能
3. ✅ 浏览血染百科

### 需要部署云函数后
1. ⏳ 上传真实剧本
2. ⏳ 查看生成的预览图
3. ⏳ 在剧本列表中展示

### 未来可以扩展
1. 📝 完善百科内容
2. 🔍 实现搜索功能
3. 🎨 优化预览图样式
4. 📱 添加更多工具

---

**创建日期**: 2025年10月15日  
**适用版本**: v1.0.0  
**状态**: ✅ 可用

