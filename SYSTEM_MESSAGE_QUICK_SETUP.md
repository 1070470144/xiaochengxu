# 系统消息功能 - 快速部署

## ⚡ 快速步骤

### 1. 上传数据库表（必须）

**HBuilderX 操作**：
```
右键 botc-miniprogram/uniCloud-aliyun/database/botc-system-messages.schema.json
→ 上传DB Schema
```

**验证**：
- 打开 uniCloud web控制台
- 查看"云数据库" → 是否有 `botc-system-messages` 表

---

### 2. 测试功能

#### 管理端发送警告

1. 打开管理端小程序
2. 进入"帖子审核管理"（`pages/botc/post/audit-list`）
3. 找到任意帖子，点击"隐藏"
4. 选择"隐藏并警告"
5. ✅ 系统会发送警告消息给发帖用户

#### 用户端查看消息

1. 打开用户端小程序
2. 进入"我的"页面
3. 右上角应该看到：
   ```
   🔔 [红点]  🖼️
   ```
4. 点击 🔔 查看消息列表
5. 点击消息查看详情

---

## 🐛 常见问题

### Q1: 右上角没有消息按钮？

**A**: 检查代码是否保存并重新编译

### Q2: 显示"系统消息请求失败"？

**A**: 数据库表未创建，请执行步骤1

### Q3: 管理端隐藏帖子时报错？

**A**: 检查是否有权限写入 `botc-system-messages` 表

---

## 📊 数据库表结构

```json
{
  "表名": "botc-system-messages",
  "字段": {
    "user_id": "接收用户ID",
    "type": "warning/notice/system",
    "title": "消息标题",
    "content": "消息内容",
    "is_read": "是否已读",
    "created_at": "创建时间"
  }
}
```

---

## ✅ 验证清单

- [ ] 数据库表已创建（在 uniCloud 控制台可见）
- [ ] 管理端可以隐藏帖子并发送警告
- [ ] 用户端"我的"页面右上角有 🔔 按钮
- [ ] 点击 🔔 可以进入消息列表
- [ ] 消息列表可以正常显示
- [ ] 点击消息可以查看详情

---

## 🎉 完成

如果以上步骤都正常，说明系统消息功能已成功部署！

